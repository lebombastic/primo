import{c as ne,a as m,t as S,b as Ja}from"./disclose-version.DwtFBC9D.js";import{aW as Tn,p as fe,f as G,g as a,t as W,a as he,c as p,r as u,s as b,A as Ce,S as K,q as k,aS as je,d as le,K as $t,aV as ht,v as Qa,al as Oe,Q as Ee,am as Ct,an as ye,ao as It,T as On,J as Fn}from"./runtime.B-tQERhy.js";import{e as ie,a as Y,d as Ye,s as ct,b as Ke,r as Rn,l as Pn,f as Za,o as $n}from"./store.hrIEzNxT.js";import{i as B,p as q}from"./if.DYHPrnE1.js";import{c as Le,b as mt}from"./preload-helper.Cgn74BMC.js";import{R as Kt,aG as en,y as zn,A as Un,z as Bn,D as at,U as it,t as ze,Q as Ue,ao as pa,q as lt,aH as Ma,C as ea,aI as Hn,ap as Wn,j as qn,aJ as Ia,S as Bt,V as Gn,aK as Vn,Z as Kn,a9 as Yn,an as Rt,E as tn,aL as Vt,a2 as yt,at as Xn,au as Ca,aw as Jn,aM as Qn,ax as an,J as nn,aN as rn,N as ja,aO as ta,aP as Da,o as Lt,g as Zn,aQ as er,a3 as Ft,aR as aa,aS as tr}from"./modal.DQW4ZWZ4.js";import{l as ar,s as Z,t as gt,f as _t,e as We,i as qe,r as He,c as et,h as nr,b as sn}from"./index.CapXeD3F.js";import{p as C,s as on}from"./props.Pqwi89p5.js";import{c as ln,w as zt,g as cn}from"./entry.Cv1PstCO.js";import{I as ce,h as Sa,k as dn}from"./Icon.CwQkWwrI.js";import{i as dt}from"./lifecycle.B6hsrwH2.js";import{c as ut,o as rr,a as sr}from"./index-client.BfaqMVnR.js";import{p as xt}from"./stores.Djv4k36v.js";function La(t,e){ar(window,["resize"],()=>e(window[t]))}function ir(t){return function(...e){var n=e[0];n.target===this&&(t==null||t.apply(this,e))}}function ft(t){return function(...e){var n=e[0];return n.preventDefault(),t==null?void 0:t.apply(this,e)}}const or=Tn;var lr=S('<span class="icon svelte-1q5kcvo"><!></span>'),cr=S('<div class="svg svelte-1q5kcvo"><!></div>'),dr=S('<!> <span class="modal-title svelte-1q5kcvo"> </span>',1),ur=S('<button class="primo-button primary svelte-1q5kcvo"><!> <span class="svelte-1q5kcvo"> </span></button>'),vr=S('<a class="primo-button primary svelte-1q5kcvo" target="blank"><!> <span class="svelte-1q5kcvo"> </span></a>'),pr=S('<header><div class="left-container svelte-1q5kcvo"><button type="button" aria-label="Close modal" class="svelte-1q5kcvo"><svg stroke="currentColor" fill="none" viewBox="0 0 24 24" class="svelte-1q5kcvo"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="center-container svelte-1q5kcvo"><!></div> <div class="right-container svelte-1q5kcvo"><!> <!></div></header>');function jt(t,e){fe(e,!1);let n=C(e,"variants",8,""),r=C(e,"icon",8,""),s=C(e,"svg",8,""),i=C(e,"title",8,""),o=C(e,"button",8,null),l=C(e,"warn",8,()=>!0),v=C(e,"onclose",8,()=>{});function c(){l()()&&(v()(),Nn())}dt();var d=pr(),g=p(d),f=p(g);u(g);var h=b(g,2),y=p(h);Kt(y,e,"title",{},I=>{var L=dr(),P=G(L);B(P,r,N=>{var E=lr(),w=p(E);ce(w,{get icon(){return r()}}),u(E),m(N,E)},N=>{var E=ne(),w=G(E);B(w,s,T=>{var F=cr(),z=p(F);Sa(z,s,!1,!1),u(F),m(T,F)},null,!0),m(N,E)});var $=b(P,2),D=p($,!0);u($),W(()=>Y(D,i())),m(I,L)}),u(h);var _=b(h,2),A=p(_);Kt(A,e,"default",{},null);var x=b(A,2);B(x,()=>o()&&o().onclick,I=>{var L=ur(),P=p(L);B(P,()=>o().icon,N=>{var E=Ce(()=>o().loading?"gg:spinner":o().icon);ce(N,{get icon(){return a(E)}})});var $=b(P,2),D=p($,!0);u($),u(L),W(()=>{L.disabled=o().loading||o().disabled,Y(D,o().label)}),ie("click",L,N=>{o().onclick(N),c()}),m(I,L)},I=>{var L=ne(),P=G(L);B(P,()=>o()&&o().href,$=>{var D=vr(),N=p(D);B(N,()=>o().icon,T=>{var F=Ce(()=>o().loading?"gg:spinner":o().icon);ce(T,{get icon(){return a(F)}})});var E=b(N,2),w=p(E,!0);u(E),u(D),W(()=>{D.disabled=o().loading||o().disabled,Z(D,"href",o().href),Y(w,o().label)}),m($,D)},null,!0),m(I,L)}),u(_),u(d),W(()=>en(d,`${n()??""} svelte-1q5kcvo`)),ie("click",f,c),m(t,d),he()}const oc=zn(Bn,Un);var fr=(t,e)=>e("INPUTTING_DOMAIN"),hr=S('<div class="container svelte-u55kl4"><p class="description svelte-u55kl4">Your website is live at <a target="blank" class="svelte-u55kl4"> </a></p> <div class="buttons svelte-u55kl4"><button class="primo-button secondary svelte-u55kl4"><!> <span>Connect Custom Domain</span></button> <button class="primo-button primary svelte-u55kl4"><!> <span>Publish Changes</span></button></div></div>'),mr=S(`<p class="description">Connect your website to a domain name. You can purchase a domain name at
      any domain name registar and connect it by changing your nameservers.</p> <div class="buttons svelte-u55kl4"><!></div>`,1),gr=async(t,e,n)=>{k(e,!0),await n(),k(e,!1)},_r=S("<!> <span>Checking Nameservers</span>",1),br=S("<!> <span>Refresh</span>",1),yr=S(`<div class="container svelte-u55kl4"><p class="description svelte-u55kl4">Your website is live at <a target="blank" class="svelte-u55kl4"> </a></p> <div class="buttons svelte-u55kl4"><button class="primo-button primary svelte-u55kl4"><!> <span>Publish Changes</span></button></div></div> <hr class="svelte-u55kl4"> <p class="description">Update your domain's nameservers at your registrar to the following to
      connect <strong> </strong> Nameserver changes can take anywhere from a few minutes to 24 hours to fully
      propagate once updated.</p> <div><div class="nameservers svelte-u55kl4"><p> </p> <p> </p></div> <div class="buttons svelte-u55kl4"><button class="primo-button secondary svelte-u55kl4"><!></button></div></div>`,1),xr=async(t,e,n)=>{k(e,!0),await n(),k(e,!0)},wr=S('<p class="description svelte-u55kl4">Your website is live at <a target="blank" class="svelte-u55kl4"> </a></p> <div class="buttons svelte-u55kl4"><button class="primo-button primary svelte-u55kl4"><!> <span>Publish Changes</span></button></div>',1),kr=S('<p class="description svelte-u55kl4">Your website changes have been published to <a target="blank" class="svelte-u55kl4"> </a></p>'),Sr=S('<!> <div class="Deploy primo-reset svelte-u55kl4"><!></div>',1);function Ar(t,e){fe(e,!0);const n=ct(),r=()=>Ke(xt,"$page",n);let s=C(e,"stage",15);async function i(){k(d,!0);const{data:_}=await at.post("/api/deploy/publish-changes",{site_id:r().data.site.id});console.log({data:_}),k(d,!1),s("PUBLISHED")}r().data.site.custom_domain_connected?s("DOMAIN_CONNECTED"):r().data.site.nameservers?s("CONNECTING_DOMAIN"):s()||s("INITIAL");let o=K(q(r().data.site.custom_domain)),l=K(q(r().data.site.nameservers));async function v(){const{data:_}=await at.post("/api/deploy/setup-domain-name",{domain_name:a(o),site_id:r().data.site.id});_.success&&(s("CONNECTING_DOMAIN"),k(l,q(_.nameservers))),k(d,!1)}async function c(){const{data:_}=await at.post("/api/deploy/connect-domain-name",{domain_name:a(o),site_id:r().data.site.id});_.success&&s("DOMAIN_CONNECTED")}let d=K(!1);var g=Sr(),f=G(g);jt(f,{title:"Publish",icon:"entypo:publish"});var h=b(f,2),y=p(h);B(y,()=>s()==="INITIAL",_=>{var A=hr(),x=p(A),I=b(p(x)),L=p(I);u(I),u(x);var P=b(x,2),$=p(P);$.__click=[fr,s];var D=p($);ce(D,{icon:"ph:link-bold"}),je(2),u($);var N=b($,2);N.__click=i;var E=p(N),w=le(()=>a(d)?"line-md:loading-twotone-loop":"entypo:publish");ce(E,{get icon(){return a(w)}}),je(2),u(N),u(P),u(A),W(()=>{Z(I,"href",`https://${r().data.site.id??""}.primo.page`),Y(L,`${r().data.site.id??""}.primo.page`)}),m(_,A)},_=>{var A=ne(),x=G(A);B(x,()=>s()==="INPUTTING_DOMAIN",I=>{var L=mr(),P=b(G(L),2),$=p(P),D=le(()=>({label:"Connect Custom Domain",onclick:async()=>{k(d,!0),await v(),k(d,null)}}));Le($,()=>it.TextInput,(N,E)=>{E(N,{label:"Domain name",placeholder:"somewhere.com",get value(){return a(o)},set value(w){k(o,q(w))},get button(){return a(D)}})}),u(P),m(I,L)},I=>{var L=ne(),P=G(L);B(P,()=>s()==="CONNECTING_DOMAIN",$=>{var D=yr(),N=G(D),E=p(N),w=b(p(E)),T=p(w);u(w),u(E);var F=b(E,2),z=p(F);z.__click=i;var U=p(z);ce(U,{icon:"entypo:publish"}),je(2),u(z),u(F),u(N);var j=b(N,4),R=b(p(j)),O=p(R);u(R),je(),u(j);var M=b(j,2),X=p(M),H=p(X),V=p(H,!0);u(H);var Q=b(H,2),ae=p(Q,!0);u(Q),u(X);var re=b(X,2),pe=p(re);pe.__click=[gr,d,c];var me=p(pe);B(me,()=>a(d),ue=>{var de=_r(),se=G(de);ce(se,{icon:"line-md:loading-twotone-loop"}),je(2),m(ue,de)},ue=>{var de=br(),se=G(de);ce(se,{icon:"ic:outline-refresh"}),je(2),m(ue,de)}),u(pe),u(re),u(M),W(()=>{Z(w,"href",`https://${r().data.site.id??""}.primo.page`),Y(T,`${r().data.site.id??""}.primo.page`),Y(O,`${a(o)??""}.`),Y(V,a(l)[0]),Y(ae,a(l)[1]),pe.disabled=a(d)}),m($,D)},$=>{var D=ne(),N=G(D);B(N,()=>s()==="DOMAIN_CONNECTED",E=>{var w=wr(),T=G(w),F=b(p(T)),z=p(F,!0);u(F),u(T);var U=b(T,2),j=p(U);j.__click=[xr,d,i];var R=p(j),O=le(()=>a(d)?"line-md:loading-twotone-loop":"entypo:publish");ce(R,{get icon(){return a(O)}}),je(2),u(j),u(U),W(()=>{Z(F,"href",`https://${r().data.site.custom_domain??""}`),Y(z,r().data.site.custom_domain),j.disabled=a(d)}),m(E,w)},E=>{var w=ne(),T=G(w);B(T,()=>s()==="PUBLISHED",F=>{var z=kr();const U=le(()=>r().data.site.custom_domain||`${r().data.site.id}.primo.page`);var j=b(p(z)),R=p(j,!0);u(j),u(z),W(()=>{Z(j,"href",`https://${a(U)??""}`),Y(R,a(U))}),m(F,z)},null,!0),m(E,w)},!0),m($,D)},!0),m(I,L)},!0),m(_,A)}),u(h),m(t,g),he()}Ye(["click"]);var Er=S('<iframe tabindex="-1" title="page preview" class="svelte-1d0opf9"></iframe>'),Mr=S('<div class="iframe-root svelte-1d0opf9"><div class="iframe-container svelte-1d0opf9"><!></div></div>');function un(t,e){fe(e,!0);let n=C(e,"preview",15,null),r=C(e,"append",3,""),s=C(e,"style",3,""),i=C(e,"src",3,null);!n()&&e.site&&o();async function o(){const I=await(await fetch(`https://cdn.primo.page/${e.site.custom_domain||e.site.id}/staging/index.html`)).text();n(I)}let l=K(void 0),v=K(void 0),c=K(void 0),d=K(void 0),g=K(void 0);function f(){const{clientWidth:x}=a(l),{clientWidth:I}=a(d);k(v,x/I),k(c,`${100/a(v)}%`)}function h(x){var I=document.createElement("div");I.innerHTML=x,Array.from(I.childNodes).forEach(L=>{a(d).contentWindow.document.body.appendChild(L)})}setTimeout(()=>{},500),$t(()=>{a(d)&&h(r())});var y=Mr();ie("resize",ht,f);var _=p(y);mt(_,x=>k(l,x),()=>a(l));var A=p(_);B(A,()=>or,x=>{var I=Er();mt(I,L=>k(d,L),()=>a(d)),W(()=>{Z(I,"style",`transform: scale(${a(v)??""})`),Z(I,"src",i()),Z(I,"srcdoc",n()+r()),ze(I,"fadein",a(g)),Ue(I,"height",a(c))}),ie("load",I,()=>{f(),k(g,!0)}),Rn(I),m(x,I)}),u(_),u(y),W(()=>Z(y,"style",s())),m(t,y),he()}function Ir({sections:t,symbols:e,pages:n,site:r}){const s=Tr(r),i=jr({symbols:e,site:r}),o=Cr({sections:t,symbols:e,site:r},i);return{site:{...Or(r),entries:o.filter(l=>l.site===r.id),fields:i.filter(l=>l.site===r.id)},page_types:[s],pages:Nr(n,s.id).map(l=>({...l,entries:o.filter(v=>v.page===l.id)})),symbols:Lr(e,r.id,s.id).map(l=>({...l,entries:o.filter(v=>v.symbol===l.id),fields:i.filter(v=>v.symbol===l.id)})),sections:Dr(n,t,s.id).map(l=>({...l,entries:o.filter(v=>v.section===l.id)}))}}function Cr({sections:t,symbols:e,site:n},r){const s=t.flatMap(v=>{const c=e.find(h=>h.id===v.symbol);if(!c)return[];const d=c.content,g=r.filter(h=>h.symbol===c.id),f={...d.en,...v.content.en};return na({content:{en:f},all_fields:g,args:{section:v.id}})}),i=e.flatMap(v=>{const c=r.filter(d=>d.symbol===v.id).filter(d=>!d.source);return na({content:v.content,all_fields:c,args:{symbol:v.id}})}),o=r.filter(v=>v.site===n.id),l=na({content:n.content,all_fields:o,args:{site:n.id}});return[...s,...i,...l]}function jr({symbols:t,site:e}){const n=[],r=[];for(const s of t)s.fields.forEach((i,o)=>{const l=pa(i);n.push({...l,index:o,symbol:s.id}),n.push(...fa({fields:i.fields,parent_id:l.id,args:{symbol:s.id}}))});return e.fields.forEach((s,i)=>{const o=pa(s);r.push({...o,index:i,site:e.id}),r.push(...fa({fields:s.fields,args:{site:e.id}}))}),[...n,...r]}function Dr(t,e,n){const r=lt.omit(Ma({page_type:n}),["created_at","entries"]),s=t.map(i=>lt.omit(Ma({page:i.id,master:r.id}),["created_at","entries"]));return[r,...s,...e.map(i=>{const o=s.find(l=>l.page===i.page);return{id:i.id,index:i.index,symbol:i.symbol,page:i.page,page_type:null,master:null,palette:o.id}})]}function Lr(t,e,n){return t.map((r,s)=>({id:r.id,name:r.name,code:r.code,site:e,index:r.index||s,page_types:[n]}))}function Nr(t,e){return t.map((n,r)=>({id:n.id,name:n.name,slug:n.url==="index"?"":lt.last(lt.split(n.url,"/")),parent:n.parent,page_type:e,index:r}))}function Tr(t){return{id:ea(),name:"Default",code:vn(),site:t.id,color:"#222",icon:"iconoir:page",index:0,entries:[],fields:[]}}function Or(t){return Hn({id:t.id,name:t.name,code:vn(t.code)})}function vn(t={html:{head:"",below:""},css:""}){return{head:t.html.head+`

<style>
${t.css}
</style>`,foot:t.html.below}}function fa({fields:t,parent_id:e=null,result:n=[],args:r={}}){return t.forEach((s,i)=>{const o={...pa({...s,index:i}),...r,id:s.id,parent:e};n.push(o),s.default&&console.log("DEFAULT",s,o),s.fields.length>0&&fa({fields:s.fields,parent_id:s.id,result:n,args:r})}),n}function na({content:t,all_fields:e,args:n={}}){const r=[];function s({value:o,locale:l,field:v,index:c=null,parent:d=null,args:g={}}){const f=ea();return r.push({id:f,value:o,locale:l,field:v,index:c,parent:d,...g}),f}function i({content_value:o,fields:l,locale:v,parent:c=null}){Object.keys(o).forEach(d=>{const g=o[d],f=l.find(h=>h.key===d);if(!f){console.log("NO FIELD FOUND",{content_value:o,item:g,field_key:d,fields:l});return}if(f.type==="group"){const h=s({value:null,locale:null,field:f.id,parent:c,args:n});i({content_value:g,locale:v,fields:e.filter(y=>y.parent===f.id),parent:h})}else if(f.type==="repeater"){const h=s({value:null,locale:null,field:f.id,parent:c,args:n});g.forEach((y,_)=>{const A=s({value:null,field:null,locale:null,index:_,parent:h,args:n});i({content_value:y,locale:v,fields:e.filter(x=>x.parent===f.id),parent:A})})}else s({value:g,field:f.id,locale:v,parent:c,args:n})})}return Object.keys(t).forEach(o=>{Wn.find(l=>l.key===o)&&i({content_value:t[o],locale:o,fields:e})}),r}function Na(t){if(console.log({data:t}),t.version===2)return Ir(t);if(t.version===3)return t}var Fr=(t,e,n)=>{e(!0),n("click")},Rr=S('<div class="title svelte-1jkjiw8"> </div>'),Pr=S('<button class="theme-thumbnail svelte-1jkjiw8" type="button"><!> <!></button>');function $r(t,e){fe(e,!0);const n=ut();let r=C(e,"append",3,""),s=C(e,"selected",15,!1);var i=Pr();i.__click=[Fr,s,n];var o=p(i);un(o,{get preview(){return e.preview},get append(){return r()}});var l=b(o,2);B(l,()=>e.title,v=>{var c=Rr(),d=p(c,!0);u(c),W(()=>Y(d,e.title)),m(v,c)}),u(i),W(()=>ze(i,"selected",s())),gt(1,i,()=>_t,()=>({duration:100})),m(t,i),he()}Ye(["click"]);var zr=(t,e)=>Qa(e,-1),Ur=(t,e)=>Qa(e),Br=S('<div class="buttons"><button type="button" class="svelte-167pncr"><!></button> <button type="button" class="svelte-167pncr"><!></button></div>'),Hr=S('<header class="svelte-167pncr"><h2 class="heading svelte-167pncr">Starters</h2> <!></header> <div class="themes svelte-167pncr"></div>',1);function Wr(t,e){fe(e,!0);let n=C(e,"append",3,""),r=K(q([]));s();async function s(){k(r,q(await Promise.all([["minimal","Minimal"],["agency","Agency"],["nonprofit","Nonprofit"],["blog","Blog"]].map(async([_,A])=>{const x=await i(_,"preview.html");return{id:_,name:A,preview:x}}))))}async function i(_,A){const x=new FileReader;return new Promise(async(I,L)=>{const{data:P,error:$}=await qn.storage.from("starters").download(`${_}/${A}?interview`);x.onload=function(){A.includes("json")?I(JSON.parse(x.result)):I(x.result)},x.readAsText(P)})}const o=ut();let l=K(null);async function v(_,A){k(l,q(_));const x=await i(_,"site.json");o("select",{data:x,preview:A})}let c=K(0),d=le(()=>a(r).length>0?a(r).slice(a(c)*4,a(c)*4+4):[]);var g=Hr(),f=G(g),h=b(p(f),2);B(h,()=>a(r).length>0,_=>{var A=Br(),x=p(A);x.__click=[zr,c];var I=p(x);ce(I,{icon:"ic:round-chevron-left"}),u(x);var L=b(x,2);L.__click=[Ur,c];var P=p(L);ce(P,{icon:"ic:round-chevron-right"}),u(L),u(A),W(()=>{x.disabled=a(c)===0,L.disabled=a(c)>=a(r).length/4-1}),m(_,A)}),u(f);var y=b(f,2);We(y,21,()=>a(d),qe,(_,A)=>{let x=()=>a(A).id,I=()=>a(A).name,L=()=>a(A).preview;var P=le(()=>a(l)===x());$r(_,{get selected(){return a(P)},get title(){return I()},get preview(){return L()},get append(){return n()},$$events:{click:()=>v(x(),L())}})}),u(y),m(t,g),he()}Ye(["click"]);function bt(t){return Array.isArray?Array.isArray(t):hn(t)==="[object Array]"}const qr=1/0;function Gr(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-qr?"-0":e}function Vr(t){return t==null?"":Gr(t)}function ot(t){return typeof t=="string"}function pn(t){return typeof t=="number"}function Kr(t){return t===!0||t===!1||Yr(t)&&hn(t)=="[object Boolean]"}function fn(t){return typeof t=="object"}function Yr(t){return fn(t)&&t!==null}function Je(t){return t!=null}function ra(t){return!t.trim().length}function hn(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Xr="Incorrect 'index' type",Jr=t=>`Invalid value for key ${t}`,Qr=t=>`Pattern length exceeds max of ${t}.`,Zr=t=>`Missing ${t} property in key`,es=t=>`Property 'weight' in key '${t}' must be a positive integer`,Ta=Object.prototype.hasOwnProperty;class ts{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let s=mn(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function mn(t){let e=null,n=null,r=null,s=1,i=null;if(ot(t)||bt(t))r=t,e=Oa(t),n=ha(t);else{if(!Ta.call(t,"name"))throw new Error(Zr("name"));const o=t.name;if(r=o,Ta.call(t,"weight")&&(s=t.weight,s<=0))throw new Error(es(o));e=Oa(o),n=ha(o),i=t.getFn}return{path:e,id:n,weight:s,src:r,getFn:i}}function Oa(t){return bt(t)?t:t.split(".")}function ha(t){return bt(t)?t.join("."):t}function as(t,e){let n=[],r=!1;const s=(i,o,l)=>{if(Je(i))if(!o[l])n.push(i);else{let v=o[l];const c=i[v];if(!Je(c))return;if(l===o.length-1&&(ot(c)||pn(c)||Kr(c)))n.push(Vr(c));else if(bt(c)){r=!0;for(let d=0,g=c.length;d<g;d+=1)s(c[d],o,l+1)}else o.length&&s(c,o,l+1)}};return s(t,ot(e)?e.split("."):e,0),r?n:n[0]}const ns={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},rs={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},ss={location:0,threshold:.6,distance:100},is={useExtendedSearch:!1,getFn:as,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ee={...rs,...ns,...ss,...is};const os=/[^ ]+/g;function ls(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(s){const i=s.match(os).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*t),l=parseFloat(Math.round(o*r)/r);return n.set(i,l),l},clear(){n.clear()}}}class Aa{constructor({getFn:e=ee.getFn,fieldNormWeight:n=ee.fieldNormWeight}={}){this.norm=ls(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ot(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();ot(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Je(e)||ra(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((s,i)=>{let o=s.getFn?s.getFn(e):this.getFn(e,s.path);if(Je(o)){if(bt(o)){let l=[];const v=[{nestedArrIndex:-1,value:o}];for(;v.length;){const{nestedArrIndex:c,value:d}=v.pop();if(Je(d))if(ot(d)&&!ra(d)){let g={v:d,i:c,n:this.norm.get(d)};l.push(g)}else bt(d)&&d.forEach((g,f)=>{v.push({nestedArrIndex:f,value:g})})}r.$[i]=l}else if(ot(o)&&!ra(o)){let l={v:o,n:this.norm.get(o)};r.$[i]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function gn(t,e,{getFn:n=ee.getFn,fieldNormWeight:r=ee.fieldNormWeight}={}){const s=new Aa({getFn:n,fieldNormWeight:r});return s.setKeys(t.map(mn)),s.setSources(e),s.create(),s}function cs(t,{getFn:e=ee.getFn,fieldNormWeight:n=ee.fieldNormWeight}={}){const{keys:r,records:s}=t,i=new Aa({getFn:e,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(s),i}function Ht(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:s=ee.distance,ignoreLocation:i=ee.ignoreLocation}={}){const o=e/t.length;if(i)return o;const l=Math.abs(r-n);return s?o+l/s:l?1:o}function ds(t=[],e=ee.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=t.length;i<o;i+=1){let l=t[i];l&&r===-1?r=i:!l&&r!==-1&&(s=i-1,s-r+1>=e&&n.push([r,s]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}const kt=32;function us(t,e,n,{location:r=ee.location,distance:s=ee.distance,threshold:i=ee.threshold,findAllMatches:o=ee.findAllMatches,minMatchCharLength:l=ee.minMatchCharLength,includeMatches:v=ee.includeMatches,ignoreLocation:c=ee.ignoreLocation}={}){if(e.length>kt)throw new Error(Qr(kt));const d=e.length,g=t.length,f=Math.max(0,Math.min(r,g));let h=i,y=f;const _=l>1||v,A=_?Array(g):[];let x;for(;(x=t.indexOf(e,y))>-1;){let N=Ht(e,{currentLocation:x,expectedLocation:f,distance:s,ignoreLocation:c});if(h=Math.min(N,h),y=x+d,_){let E=0;for(;E<d;)A[x+E]=1,E+=1}}y=-1;let I=[],L=1,P=d+g;const $=1<<d-1;for(let N=0;N<d;N+=1){let E=0,w=P;for(;E<w;)Ht(e,{errors:N,currentLocation:f+w,expectedLocation:f,distance:s,ignoreLocation:c})<=h?E=w:P=w,w=Math.floor((P-E)/2+E);P=w;let T=Math.max(1,f-w+1),F=o?g:Math.min(f+w,g)+d,z=Array(F+2);z[F+1]=(1<<N)-1;for(let j=F;j>=T;j-=1){let R=j-1,O=n[t.charAt(R)];if(_&&(A[R]=+!!O),z[j]=(z[j+1]<<1|1)&O,N&&(z[j]|=(I[j+1]|I[j])<<1|1|I[j+1]),z[j]&$&&(L=Ht(e,{errors:N,currentLocation:R,expectedLocation:f,distance:s,ignoreLocation:c}),L<=h)){if(h=L,y=R,y<=f)break;T=Math.max(1,2*f-y)}}if(Ht(e,{errors:N+1,currentLocation:f,expectedLocation:f,distance:s,ignoreLocation:c})>h)break;I=z}const D={isMatch:y>=0,score:Math.max(.001,L)};if(_){const N=ds(A,l);N.length?v&&(D.indices=N):D.isMatch=!1}return D}function vs(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const s=t.charAt(n);e[s]=(e[s]||0)|1<<r-n-1}return e}class _n{constructor(e,{location:n=ee.location,threshold:r=ee.threshold,distance:s=ee.distance,includeMatches:i=ee.includeMatches,findAllMatches:o=ee.findAllMatches,minMatchCharLength:l=ee.minMatchCharLength,isCaseSensitive:v=ee.isCaseSensitive,ignoreLocation:c=ee.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:v,ignoreLocation:c},this.pattern=v?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(f,h)=>{this.chunks.push({pattern:f,alphabet:vs(f),startIndex:h})},g=this.pattern.length;if(g>kt){let f=0;const h=g%kt,y=g-h;for(;f<y;)d(this.pattern.substr(f,kt),f),f+=kt;if(h){const _=g-kt;d(this.pattern.substr(_),_)}}else d(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let y={isMatch:!0,score:0};return r&&(y.indices=[[0,e.length-1]]),y}const{location:s,distance:i,threshold:o,findAllMatches:l,minMatchCharLength:v,ignoreLocation:c}=this.options;let d=[],g=0,f=!1;this.chunks.forEach(({pattern:y,alphabet:_,startIndex:A})=>{const{isMatch:x,score:I,indices:L}=us(e,y,_,{location:s+A,distance:i,threshold:o,findAllMatches:l,minMatchCharLength:v,includeMatches:r,ignoreLocation:c});x&&(f=!0),g+=I,x&&L&&(d=[...d,...L])});let h={isMatch:f,score:f?g/this.chunks.length:1};return f&&r&&(h.indices=d),h}}class wt{constructor(e){this.pattern=e}static isMultiMatch(e){return Fa(e,this.multiRegex)}static isSingleMatch(e){return Fa(e,this.singleRegex)}search(){}}function Fa(t,e){const n=t.match(e);return n?n[1]:null}class ps extends wt{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class fs extends wt{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class hs extends wt{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class ms extends wt{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class gs extends wt{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class _s extends wt{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class bn extends wt{constructor(e,{location:n=ee.location,threshold:r=ee.threshold,distance:s=ee.distance,includeMatches:i=ee.includeMatches,findAllMatches:o=ee.findAllMatches,minMatchCharLength:l=ee.minMatchCharLength,isCaseSensitive:v=ee.isCaseSensitive,ignoreLocation:c=ee.ignoreLocation}={}){super(e),this._bitapSearch=new _n(e,{location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:v,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class yn extends wt{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const s=[],i=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+i,s.push([r,n-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const ma=[ps,yn,hs,ms,_s,gs,fs,bn],Ra=ma.length,bs=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ys="|";function xs(t,e={}){return t.split(ys).map(n=>{let r=n.trim().split(bs).filter(i=>i&&!!i.trim()),s=[];for(let i=0,o=r.length;i<o;i+=1){const l=r[i];let v=!1,c=-1;for(;!v&&++c<Ra;){const d=ma[c];let g=d.isMultiMatch(l);g&&(s.push(new d(g,e)),v=!0)}if(!v)for(c=-1;++c<Ra;){const d=ma[c];let g=d.isSingleMatch(l);if(g){s.push(new d(g,e));break}}}return s})}const ws=new Set([bn.type,yn.type]);class ks{constructor(e,{isCaseSensitive:n=ee.isCaseSensitive,includeMatches:r=ee.includeMatches,minMatchCharLength:s=ee.minMatchCharLength,ignoreLocation:i=ee.ignoreLocation,findAllMatches:o=ee.findAllMatches,location:l=ee.location,threshold:v=ee.threshold,distance:c=ee.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:o,ignoreLocation:i,location:l,threshold:v,distance:c},this.pattern=n?e:e.toLowerCase(),this.query=xs(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;e=s?e:e.toLowerCase();let i=0,o=[],l=0;for(let v=0,c=n.length;v<c;v+=1){const d=n[v];o.length=0,i=0;for(let g=0,f=d.length;g<f;g+=1){const h=d[g],{isMatch:y,indices:_,score:A}=h.search(e);if(y){if(i+=1,l+=A,r){const x=h.constructor.type;ws.has(x)?o=[...o,..._]:o.push(_)}}else{l=0,i=0,o.length=0;break}}if(i){let g={isMatch:!0,score:l/i};return r&&(g.indices=o),g}}return{isMatch:!1,score:1}}}const ga=[];function Ss(...t){ga.push(...t)}function _a(t,e){for(let n=0,r=ga.length;n<r;n+=1){let s=ga[n];if(s.condition(t,e))return new s(t,e)}return new _n(t,e)}const Yt={AND:"$and",OR:"$or"},ba={PATH:"$path",PATTERN:"$val"},ya=t=>!!(t[Yt.AND]||t[Yt.OR]),As=t=>!!t[ba.PATH],Es=t=>!bt(t)&&fn(t)&&!ya(t),Pa=t=>({[Yt.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function xn(t,e,{auto:n=!0}={}){const r=s=>{let i=Object.keys(s);const o=As(s);if(!o&&i.length>1&&!ya(s))return r(Pa(s));if(Es(s)){const v=o?s[ba.PATH]:i[0],c=o?s[ba.PATTERN]:s[v];if(!ot(c))throw new Error(Jr(v));const d={keyId:ha(v),pattern:c};return n&&(d.searcher=_a(c,e)),d}let l={children:[],operator:i[0]};return i.forEach(v=>{const c=s[v];bt(c)&&c.forEach(d=>{l.children.push(r(d))})}),l};return ya(t)||(t=Pa(t)),r(t)}function Ms(t,{ignoreFieldNorm:e=ee.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:i,score:o})=>{const l=s?s.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(e?1:i))}),n.score=r})}function Is(t,e){const n=t.matches;e.matches=[],Je(n)&&n.forEach(r=>{if(!Je(r.indices)||!r.indices.length)return;const{indices:s,value:i}=r;let o={indices:s,value:i};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function Cs(t,e){e.score=t.score}function js(t,e,{includeMatches:n=ee.includeMatches,includeScore:r=ee.includeScore}={}){const s=[];return n&&s.push(Is),r&&s.push(Cs),t.map(i=>{const{idx:o}=i,l={item:e[o],refIndex:o};return s.length&&s.forEach(v=>{v(i,l)}),l})}class Dt{constructor(e,n={},r){this.options={...ee,...n},this.options.useExtendedSearch,this._keyStore=new ts(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof Aa))throw new Error(Xr);this._myIndex=n||gn(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Je(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const i=this._docs[r];e(i,r)&&(this.removeAt(r),r-=1,s-=1,n.push(i))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:i,sortFn:o,ignoreFieldNorm:l}=this.options;let v=ot(e)?ot(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Ms(v,{ignoreFieldNorm:l}),i&&v.sort(o),pn(n)&&n>-1&&(v=v.slice(0,n)),js(v,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(e){const n=_a(e,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:i,i:o,n:l})=>{if(!Je(i))return;const{isMatch:v,score:c,indices:d}=n.searchIn(i);v&&s.push({item:i,idx:o,matches:[{score:c,value:i,norm:l,indices:d}]})}),s}_searchLogical(e){const n=xn(e,this.options),r=(l,v,c)=>{if(!l.children){const{keyId:g,searcher:f}=l,h=this._findMatches({key:this._keyStore.get(g),value:this._myIndex.getValueForItemAtKeyId(v,g),searcher:f});return h&&h.length?[{idx:c,item:v,matches:h}]:[]}const d=[];for(let g=0,f=l.children.length;g<f;g+=1){const h=l.children[g],y=r(h,v,c);if(y.length)d.push(...y);else if(l.operator===Yt.AND)return[]}return d},s=this._myIndex.records,i={},o=[];return s.forEach(({$:l,i:v})=>{if(Je(l)){let c=r(n,l,v);c.length&&(i[v]||(i[v]={idx:v,item:l,matches:[]},o.push(i[v])),c.forEach(({matches:d})=>{i[v].matches.push(...d)}))}}),o}_searchObjectList(e){const n=_a(e,this.options),{keys:r,records:s}=this._myIndex,i=[];return s.forEach(({$:o,i:l})=>{if(!Je(o))return;let v=[];r.forEach((c,d)=>{v.push(...this._findMatches({key:c,value:o[d],searcher:n}))}),v.length&&i.push({idx:l,item:o,matches:v})}),i}_findMatches({key:e,value:n,searcher:r}){if(!Je(n))return[];let s=[];if(bt(n))n.forEach(({v:i,i:o,n:l})=>{if(!Je(i))return;const{isMatch:v,score:c,indices:d}=r.searchIn(i);v&&s.push({score:c,key:e,value:i,idx:o,norm:l,indices:d})});else{const{v:i,n:o}=n,{isMatch:l,score:v,indices:c}=r.searchIn(i);l&&s.push({score:v,key:e,value:i,norm:o,indices:c})}return s}}Dt.version="7.0.0";Dt.createIndex=gn;Dt.parseIndex=cs;Dt.config=ee;Dt.parseQuery=xn;Ss(ks);var Ds=S('<link rel="stylesheet">'),Ls=S('<div class="font-preview svelte-1rpvfzx"> </div>'),Ns=(t,e)=>k(e,!1),Ts=(t,e,n)=>e(a(n)),Os=S('<button class="svelte-1rpvfzx"> </button>'),Fs=S(`<span style="grid-column: 1 / -1;
				padding: 0.5rem;
				font-size: 0.875rem;
				border-left: 3px solid red;">No fonts found</span>`),Rs=S('<div class="fonts svelte-1rpvfzx"><button class="close svelte-1rpvfzx" aria-label="Close"><!></button> <!></div>'),Ps=S('<div class="FontPicker svelte-1rpvfzx"><p class="label svelte-1rpvfzx"> </p> <div class="container svelte-1rpvfzx"><!> <form class="svelte-1rpvfzx"><!></form></div> <!></div>');function $s(t,e){fe(e,!0);const n=ut();let r=C(e,"value",15),s=K(""),i=K(!1);$t(()=>{a(s)===""&&k(i,!1)});let o=[],l=K(q([]));at.get("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyCjyO1GLN6D9LFBCVFNSVoyAC55givY0pg").then(({data:$})=>{o=$.items});async function v(){if(a(s).length===0)a(d)==="all"?k(l,q(lt.sampleSize(o,10))):g();else{const $={keys:["family","category"],includeScore:!0},D=new Dt(o,$);k(l,q(D.search(a(s)).slice(0,10).map(({item:N})=>N)))}k(i,!0)}function c($){r($.family),n("input")}let d=K("all");function g(){a(d)==="all"?k(l,q(o.slice(0,10))):k(l,q(lt.sampleSize(o.filter($=>$.category===a(d)),10))),k(i,!0)}var f=Ps();Pn($=>{var D=ne(),N=G(D);We(N,17,()=>a(l),qe,(E,w)=>{var T=Ds();W(()=>Z(T,"href",`https://fonts.googleapis.com/css2?family=${a(w).family.replace(/ /g,"+")??""}:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700`)),m(E,T)}),m($,D)});var h=p(f),y=p(h,!0);u(h);var _=b(h,2),A=p(_);B(A,r,$=>{var D=Ls(),N=p(D,!0);u(D),W(()=>{Ue(D,"font-family",r()),Y(N,r())}),m($,D)});var x=b(A,2),I=p(x),L=le(()=>({label:a(s)?"Search":"Show Random",type:"submit"}));Le(I,()=>it.TextInput,($,D)=>{D($,{options:[{label:"All",value:"all"},{label:"Serif",value:"serif"},{label:"Sans Serif",value:"sans-serif"},{label:"Display",value:"display"},{label:"Handwriting",value:"handwriting"},{label:"Monospace",value:"monospace"}],get selection(){return a(d)},set selection(N){k(d,q(N))},get value(){return a(s)},set value(N){k(s,q(N))},prefix_icon:"tabler:search",label:"Search fonts",get button(){return a(L)},$$events:{select:()=>{a(l).length>0&&g()}}})}),u(x),u(_);var P=b(_,2);B(P,()=>a(i),$=>{var D=Rs(),N=p(D);N.__click=[Ns,i];var E=p(N);ce(E,{icon:"material-symbols:close"}),u(N);var w=b(N,2);We(w,17,()=>a(l),qe,(T,F)=>{var z=ne(),U=G(z);dn(U,()=>a(F).family,j=>{var R=Os();R.__click=[Ts,c,F];var O=p(R,!0);u(R),W(()=>{ze(R,"active",r()===a(F).family),Ue(R,"font-family",a(F).family),Y(O,a(F).family)}),gt(1,R,()=>_t,()=>({delay:100})),m(j,R)}),m(T,z)},T=>{var F=Fs();m(T,F)}),u(D),gt(1,D,()=>_t),m($,D)}),u(f),W(()=>Y(y,e.label)),ie("submit",x,$=>{$.preventDefault(),v()}),m(t,f),he()}Ye(["click"]);var zs={grad:.9,turn:360,rad:360/(2*Math.PI)},pt=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Pe=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},tt=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},wn=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},$a=function(t){return{r:tt(t.r,0,255),g:tt(t.g,0,255),b:tt(t.b,0,255),a:tt(t.a)}},sa=function(t){return{r:Pe(t.r),g:Pe(t.g),b:Pe(t.b),a:Pe(t.a,3)}},Us=/^#([0-9a-f]{3,8})$/i,Wt=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},kn=function(t){var e=t.r,n=t.g,r=t.b,s=t.a,i=Math.max(e,n,r),o=i-Math.min(e,n,r),l=o?i===e?(n-r)/o:i===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(l<0?l+6:l),s:i?o/i*100:0,v:i/255*100,a:s}},Sn=function(t){var e=t.h,n=t.s,r=t.v,s=t.a;e=e/360*6,n/=100,r/=100;var i=Math.floor(e),o=r*(1-n),l=r*(1-(e-i)*n),v=r*(1-(1-e+i)*n),c=i%6;return{r:255*[r,l,o,o,v,r][c],g:255*[v,r,r,l,o,o][c],b:255*[o,o,v,r,r,l][c],a:s}},za=function(t){return{h:wn(t.h),s:tt(t.s,0,100),l:tt(t.l,0,100),a:tt(t.a)}},Ua=function(t){return{h:Pe(t.h),s:Pe(t.s),l:Pe(t.l),a:Pe(t.a,3)}},Ba=function(t){return Sn((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},Pt=function(t){return{h:(e=kn(t)).h,s:(s=(200-(n=e.s))*(r=e.v)/100)>0&&s<200?n*r/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,n,r,s},Bs=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Hs=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ws=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qs=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xa={string:[[function(t){var e=Us.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Pe(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Pe(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=Ws.exec(t)||qs.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:$a({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=Bs.exec(t)||Hs.exec(t);if(!e)return null;var n,r,s=za({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(zs[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Ba(s)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,s=t.a,i=s===void 0?1:s;return pt(e)&&pt(n)&&pt(r)?$a({r:Number(e),g:Number(n),b:Number(r),a:Number(i)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,s=t.a,i=s===void 0?1:s;if(!pt(e)||!pt(n)||!pt(r))return null;var o=za({h:Number(e),s:Number(n),l:Number(r),a:Number(i)});return Ba(o)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,s=t.a,i=s===void 0?1:s;if(!pt(e)||!pt(n)||!pt(r))return null;var o=function(l){return{h:wn(l.h),s:tt(l.s,0,100),v:tt(l.v,0,100),a:tt(l.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(i)});return Sn(o)},"hsv"]]},Ha=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},Gs=function(t){return typeof t=="string"?Ha(t.trim(),xa.string):typeof t=="object"&&t!==null?Ha(t,xa.object):[null,void 0]},ia=function(t,e){var n=Pt(t);return{h:n.h,s:tt(n.s+100*e,0,100),l:n.l,a:n.a}},oa=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Wa=function(t,e){var n=Pt(t);return{h:n.h,s:n.s,l:tt(n.l+100*e,0,100),a:n.a}},wa=function(){function t(e){this.parsed=Gs(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Pe(oa(this.rgba),2)},t.prototype.isDark=function(){return oa(this.rgba)<.5},t.prototype.isLight=function(){return oa(this.rgba)>=.5},t.prototype.toHex=function(){return e=sa(this.rgba),n=e.r,r=e.g,s=e.b,o=(i=e.a)<1?Wt(Pe(255*i)):"","#"+Wt(n)+Wt(r)+Wt(s)+o;var e,n,r,s,i,o},t.prototype.toRgb=function(){return sa(this.rgba)},t.prototype.toRgbString=function(){return e=sa(this.rgba),n=e.r,r=e.g,s=e.b,(i=e.a)<1?"rgba("+n+", "+r+", "+s+", "+i+")":"rgb("+n+", "+r+", "+s+")";var e,n,r,s,i},t.prototype.toHsl=function(){return Ua(Pt(this.rgba))},t.prototype.toHslString=function(){return e=Ua(Pt(this.rgba)),n=e.h,r=e.s,s=e.l,(i=e.a)<1?"hsla("+n+", "+r+"%, "+s+"%, "+i+")":"hsl("+n+", "+r+"%, "+s+"%)";var e,n,r,s,i},t.prototype.toHsv=function(){return e=kn(this.rgba),{h:Pe(e.h),s:Pe(e.s),v:Pe(e.v),a:Pe(e.a,3)};var e},t.prototype.invert=function(){return Re({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Re(ia(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Re(ia(this.rgba,-e))},t.prototype.grayscale=function(){return Re(ia(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Re(Wa(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Re(Wa(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Re({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):Pe(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=Pt(this.rgba);return typeof e=="number"?Re({h:e,s:n.s,l:n.l,a:n.a}):Pe(n.h)},t.prototype.isEqual=function(e){return this.toHex()===Re(e).toHex()},t}(),Re=function(t){return t instanceof wa?t:new wa(t)},qa=[],Vs=function(t){t.forEach(function(e){qa.indexOf(e)<0&&(e(wa,xa),qa.push(e))})},Ks=S('<input type="hidden">'),Ys=S('<div class="slider svelte-1xizm76" role="slider" tabindex="0"><div class="track svelte-1xizm76"></div> <div class="thumb svelte-1xizm76"></div></div> <!>',1);function Xt(t,e){fe(e,!1);const n=ye(),r=ye(),s=ye(),i=ye();let o=C(e,"min",8,0),l=C(e,"max",8,100),v=C(e,"step",8,1),c=C(e,"value",12,50),d=C(e,"ariaValueText",8,O=>O.toString()),g=C(e,"name",8,void 0),f=C(e,"direction",8,"horizontal"),h=C(e,"reverse",8,!1),y=C(e,"keyboardOnly",8,!1),_=C(e,"slider",12,void 0),A=C(e,"ariaLabel",8,void 0),x=C(e,"ariaLabelledBy",8,void 0),I=C(e,"ariaControls",8,void 0),L=C(e,"isDragging",12,!1);const P=ut();function $(O){const M=1/a(s),X=Math.round(O*M)/M;return Math.max(a(n),Math.min(a(r),X))}function D(O){const M=O.shiftKey?a(s)*10:a(s);O.key==="ArrowUp"||O.key==="ArrowRight"?(c(c()+M),O.preventDefault()):O.key==="ArrowDown"||O.key==="ArrowLeft"?(c(c()-M),O.preventDefault()):O.key==="Home"?(c(a(n)),O.preventDefault()):O.key==="End"?(c(a(r)),O.preventDefault()):O.key==="PageUp"?(c(c()+a(s)*10),O.preventDefault()):O.key==="PageDown"&&(c(c()-a(s)*10),O.preventDefault()),c($(c())),P("input",c())}const N={horizontal:{clientSize:"clientWidth",offset:"left",client:"clientX"},vertical:{clientSize:"clientHeight",offset:"top",client:"clientY"}};function E(O){var V,Q;const M=((V=_())==null?void 0:V[N[f()].clientSize])||120,X=((Q=_())==null?void 0:Q.getBoundingClientRect()[N[f()].offset])||0;let H=O[N[f()].client]-X;f()==="vertical"&&(H=-1*H+M),h()?c(a(r)-H/M*(a(r)-a(n))):c(H/M*(a(r)-a(n))+a(n)),c($(c())),P("input",c())}function w(O){E(O),L(!0)}function T(O){L()&&E(O)}function F(){L(!1)}function z(O){E({clientX:O.changedTouches[0].clientX,clientY:O.changedTouches[0].clientY})}Oe(()=>Ee(o()),()=>{k(n,typeof o()=="string"?parseFloat(o()):o())}),Oe(()=>Ee(l()),()=>{k(r,typeof l()=="string"?parseFloat(l()):l())}),Oe(()=>Ee(v()),()=>{k(s,typeof v()=="string"?parseFloat(v()):v())}),Oe(()=>(Ee(c()),a(n),a(r)),()=>{k(i,((c()-a(n))/(a(r)-a(n))*1).toFixed(4))}),Ct(),dt();var U=Ys();ie("mousemove",ht,T),ie("mouseup",ht,F);var j=G(U);mt(j,O=>_(O),()=>_()),W(()=>Z(j,"aria-valuetext",d()(c())));var R=b(j,2);B(R,g,O=>{var M=Ks();He(M),W(()=>{Z(M,"name",g()),et(M,c())}),m(O,M)}),W(()=>{Z(j,"aria-orientation",f()),Z(j,"aria-valuemax",a(r)),Z(j,"aria-valuemin",a(n)),Z(j,"aria-valuenow",c()),Z(j,"aria-label",A()),Z(j,"aria-labelledby",x()),Z(j,"aria-controls",I()),ze(j,"reverse",h()),Ue(j,"--position",a(i))}),ie("keydown",j,D),ie("mousedown",j,ir(function(...O){var M;(M=y()?void 0:w)==null||M.apply(this,O)})),ie("touchstart",j,ft(function(...O){var M;(M=y()?void 0:z)==null||M.apply(this,O)}),void 0,!1),ie("touchmove",j,ft(function(...O){var M;(M=y()?void 0:z)==null||M.apply(this,O)}),void 0,!1),ie("touchend",j,ft(function(...O){var M;(M=y()?void 0:z)==null||M.apply(this,O)}),void 0,!1),m(t,U),he()}var Xs=S('<div class="picker svelte-yue09l"><!> <div class="s svelte-yue09l"><!></div> <div class="v svelte-yue09l"><!></div></div>');function Js(t,e){fe(e,!1);const n=ut();let r=C(e,"components",8),s=C(e,"h",8),i=C(e,"s",12),o=C(e,"v",12),l=C(e,"isDark",8),v=C(e,"texts",8),c=ye(),d=!1,g=ye(),f=ye({x:100,y:0});function h(T,F,z){return Math.min(Math.max(F,T),z)}function y(T){const{width:F,left:z,height:U,top:j}=a(c).getBoundingClientRect(),R={x:h(T.clientX-z,0,F),y:h(T.clientY-j,0,U)};i(h(R.x/F,0,1)*100),o(h((U-R.y)/U,0,1)*100)}function _(T){T.button===0&&(d=!0,y(T))}function A(){d=!1}function x(T){d&&y(T)}function I(T){T.target.isSameNode(a(c))}function L(T){T.preventDefault(),y(T.changedTouches[0])}Oe(()=>(Ee(s()),Re),()=>{typeof s()=="number"&&k(g,Re({h:s(),s:100,v:100,a:1}).toHex())}),Oe(()=>(Ee(i()),Ee(o()),a(c)),()=>{typeof i()=="number"&&typeof o()=="number"&&a(c)&&k(f,{x:i(),y:100-o()})}),Oe(()=>(Ee(i()),Ee(o())),()=>{n("input",{s:i(),v:o()})}),Ct(),dt();var P=Xs();ie("mouseup",ht,A),ie("mousedown",ht,I),ie("mousemove",ht,x),mt(P,T=>k(c,T),()=>a(c));var $=p(P);Le($,()=>r().pickerIndicator,(T,F)=>{F(T,{get pos(){return a(f)},get isDark(){return l()}})});var D=b($,2),N=p(D);Xt(N,{get value(){return i()},set value(T){i(T)},keyboardOnly:!0,ariaValueText:T=>`${T}%`,get ariaLabel(){return v().label.s},$$legacy:!0}),u(D);var E=b(D,2),w=p(E);Xt(w,{get value(){return o()},set value(T){o(T)},keyboardOnly:!0,ariaValueText:T=>`${T}%`,direction:"vertical",get ariaLabel(){return v().label.v},$$legacy:!0}),u(E),u(P),W(()=>{Ue(P,"--picker-color-bg",a(g)),Ue(D,"--pos-y",a(f).y),Ue(E,"--pos-x",a(f).x)}),ie("mousedown",P,ft(_)),ie("touchstart",P,L,void 0,!1),ie("touchmove",P,ft(L),void 0,!1),ie("touchend",P,L,void 0,!1),m(t,P),he()}var Qs=S('<div class="picker-indicator svelte-1yme5cd"></div>');function Zs(t,e){fe(e,!1);let n=C(e,"pos",8),r=C(e,"isDark",8);dt();var s=Qs();W(()=>{ze(s,"is-dark",r()),Ue(s,"--pos-x",n().x),Ue(s,"--pos-y",n().y)}),m(t,s),he()}var ei=S('<input class="svelte-133j1m6">'),ti=S('<input type="number" min="0" max="255" class="svelte-133j1m6"> <input type="number" min="0" max="255" class="svelte-133j1m6"> <input type="number" min="0" max="255" class="svelte-133j1m6">',1),ai=S('<input type="number" min="0" max="360" class="svelte-133j1m6"> <input type="number" min="0" max="100" class="svelte-133j1m6"> <input type="number" min="0" max="100" class="svelte-133j1m6">',1),ni=S('<input type="number" min="0" max="1" step="0.01" class="svelte-133j1m6">'),ri=S('<button type="button" class="svelte-133j1m6"><span class="disappear svelte-133j1m6" aria-hidden="true"> </span> <span class="appear svelte-133j1m6"> </span></button>'),si=S('<div class="button-like svelte-133j1m6"> </div>'),ii=S('<div class="text-input svelte-133j1m6"><div class="input-container svelte-133j1m6"><!> <!></div> <!></div>');function oi(t,e){fe(e,!1);const n=ye(),r=ye(),s=ye(),i=ye(),o=ye(),l=ut();let v=C(e,"isAlpha",8),c=C(e,"rgb",12),d=C(e,"hsv",12),g=C(e,"hex",12),f=C(e,"textInputModes",8),h=C(e,"texts",8);const y=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;let _=ye(f()[0]||"hex");function A(E){const w=E.target;y.test(w.value)&&(g(w.value),l("input",{hex:g()}))}function x(E){return function(w){c({...c(),[E]:parseFloat(w.target.value)}),l("input",{rgb:c()})}}function I(E){return function(w){d({...d(),[E]:parseFloat(w.target.value)}),l("input",{hsv:d()})}}Oe(()=>(Ee(f()),a(_)),()=>{k(n,f()[(f().indexOf(a(_))+1)%f().length])}),Oe(()=>Ee(d()),()=>{k(r,Math.round(d().h))}),Oe(()=>Ee(d()),()=>{k(s,Math.round(d().s))}),Oe(()=>Ee(d()),()=>{k(i,Math.round(d().v))}),Oe(()=>Ee(d()),()=>{k(o,d().a===void 0?1:Math.round(d().a*100)/100)}),Ct(),dt();var L=ii(),P=p(L),$=p(P);B($,()=>a(_)==="hex",E=>{var w=ei();He(w),W(()=>{Z(w,"aria-label",h().label.hex),et(w,g()),Ue(w,"flex",3)}),ie("input",w,A),m(E,w)},E=>{var w=ne(),T=G(w);B(T,()=>a(_)==="rgb",F=>{var z=ti(),U=G(z),j=le(()=>x("r"));He(U);var R=b(U,2),O=le(()=>x("g"));He(R);var M=b(R,2),X=le(()=>x("b"));He(M),W(()=>{Z(U,"aria-label",h().label.r),et(U,c().r),Z(R,"aria-label",h().label.g),et(R,c().g),Z(M,"aria-label",h().label.b),et(M,c().b)}),ie("input",U,function(...H){var V;(V=a(j))==null||V.apply(this,H)}),ie("input",R,function(...H){var V;(V=a(O))==null||V.apply(this,H)}),ie("input",M,function(...H){var V;(V=a(X))==null||V.apply(this,H)}),m(F,z)},F=>{var z=ai(),U=G(z),j=le(()=>I("h"));He(U);var R=b(U,2),O=le(()=>I("s"));He(R);var M=b(R,2),X=le(()=>I("v"));He(M),W(()=>{Z(U,"aria-label",h().label.h),et(U,a(r)),Z(R,"aria-label",h().label.s),et(R,a(s)),Z(M,"aria-label",h().label.v),et(M,a(i))}),ie("input",U,function(...H){var V;(V=a(j))==null||V.apply(this,H)}),ie("input",R,function(...H){var V;(V=a(O))==null||V.apply(this,H)}),ie("input",M,function(...H){var V;(V=a(X))==null||V.apply(this,H)}),m(F,z)},!0),m(E,w)});var D=b($,2);B(D,v,E=>{var w=ni(),T=le(()=>a(_)==="hsv"?I("a"):x("a"));He(w),W(()=>{Z(w,"aria-label",h().label.a),et(w,a(o))}),ie("input",w,function(...F){var z;(z=a(T))==null||z.apply(this,F)}),m(E,w)}),u(P);var N=b(P,2);B(N,()=>f().length>1,E=>{var w=ri(),T=p(w),F=p(T,!0);u(T);var z=b(T,2),U=p(z);u(z),u(w),W(()=>{Y(F,h().color[a(_)]),Y(U,`${h().changeTo??""} ${a(n)??""}`)}),ie("click",w,()=>k(_,a(n))),m(E,w)},E=>{var w=si(),T=p(w,!0);u(w),W(()=>Y(T,h().color[a(_)])),m(E,w)}),u(L),m(t,L),he()}var li=S('<label class="svelte-imu75"><div class="container svelte-imu75"><input type="color" aria-haspopup="dialog" class="svelte-imu75"> <div class="alpha svelte-imu75"></div> <div class="color svelte-imu75"></div></div> </label>');function ci(t,e){let n=C(e,"labelElement",12),r=C(e,"hex",8),s=C(e,"label",8),i=C(e,"name",8,void 0);C(e,"isOpen",8);function o(){}var l=li();mt(l,f=>n(f),()=>n());var v=p(l),c=p(v);He(c);var d=b(c,4);u(v);var g=b(v);u(l),W(()=>{Z(c,"name",i()),et(c,r()),Ue(d,"background",r()),Y(g,` ${s()??""}`)}),ie("click",c,ft(o)),ie("mousedown",c,ft(o)),ie("click",l,ft(o)),ie("mousedown",l,ft(o)),m(t,l)}var di=S('<div class="wrapper svelte-qpqy1u" aria-label="color picker"><!></div>');function ui(t,e){let n=C(e,"wrapper",12),r=C(e,"isOpen",8),s=C(e,"isDialog",8);var i=di();mt(i,l=>n(l),()=>n());var o=p(i);Kt(o,e,"default",{},null),u(i),W(()=>{Z(i,"role",s()?"dialog":void 0),ze(i,"is-open",r())}),m(t,i)}const la={label:{h:"hue channel",s:"saturation channel",v:"brightness channel",r:"red channel",g:"green channel",b:"blue channel",a:"alpha channel",hex:"hex color",withoutColor:"without color"},color:{rgb:"rgb",hsv:"hsv",hex:"hex"},changeTo:"change to "},vi={contrast:"contrast :",nbGradeSummary:t=>t?`⚠️ ${t} contrast grade${t&&"s"} fail`:"Contrast grade information",guidelines:'Learn more at <a href="https://webaim.org/articles/contrast/" target="_blank">WebAIM contrast guide</a>'},An="a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function pi(t){return function(e){if(e.target===window)return;const n=e.target;if(!t.contains(n))return;const r=t.querySelectorAll(An),s=r[0],i=r[r.length-1];function o(v){return v.code==="Tab"&&!v.shiftKey}function l(v){return v.code==="Tab"&&v.shiftKey}o(e)&&e.target===i?(e.preventDefault(),s.focus()):l(e)&&e.target===s&&(e.preventDefault(),i.focus())}}const fi=t=>{const e=t.querySelector(An);e&&e.focus();const n=pi(t);return document.addEventListener("keydown",n),{destroy(){document.removeEventListener("keydown",n)}}};var hi=S('<label class="nullability-checkbox svelte-wumemt"><div class="svelte-wumemt"><input type="checkbox" class="svelte-wumemt"> <span class="svelte-wumemt"></span></div> </label>');function mi(t,e){fe(e,!1);let n=C(e,"isUndefined",12),r=C(e,"texts",8);dt();var s=hi(),i=p(s),o=p(i);He(o),je(2),u(i);var l=b(i);u(s),W(()=>Y(l,` ${r().label.withoutColor??""}`)),nr(o,n),m(t,s),he()}var gi=S('<input type="hidden">'),_i=S('<div class="a svelte-115m8os"><!></div>'),bi=S('<!> <!> <div class="h svelte-115m8os"><!></div> <!> <!> <!>',1),yi=S("<span><!> <!></span>");function Ga(t,e){fe(e,!1);const n=ut();let r=C(e,"components",24,()=>({})),s=C(e,"label",8,"Choose a color"),i=C(e,"name",8,void 0),o=C(e,"nullable",8,!1),l=C(e,"rgb",28,()=>o()?void 0:{r:255,g:0,b:0,a:1}),v=C(e,"hsv",28,()=>o()?void 0:{h:0,s:100,v:100,a:1}),c=C(e,"hex",28,()=>o()?void 0:"#ff0000"),d=C(e,"color",12,void 0),g=C(e,"isDark",12,!1),f=C(e,"isAlpha",8,!0),h=C(e,"isDialog",8,!0),y=C(e,"isOpen",28,()=>!h()),_=C(e,"position",8,"fixed"),A=C(e,"isTextInput",8,!0),x=C(e,"textInputModes",24,()=>["hex","rgb","hsv"]),I=C(e,"sliderDirection",8,"vertical"),L=C(e,"disableCloseClickOutside",8,!1),P=C(e,"a11yColors",24,()=>[{bgHex:"#ffffff"}]),$=C(e,"a11yLevel",8,"AA"),D=C(e,"texts",8,void 0),N=C(e,"a11yTexts",8,void 0),E=ye({r:255,g:0,b:0,a:1}),w=ye({h:0,s:100,v:100,a:1}),T=ye("#ff0000"),F=ye(!1),z=a(F),U=ye(),j=ye(),R=ye(),O,M=ye(),X=ye();const H=12,V={pickerIndicator:Zs,textInput:oi,input:ci,nullabilityCheckbox:mi,wrapper:ui};function Q(){return{...V,...r()}}function ae(){var te,ve,be;return{label:{...la.label,...(te=D())==null?void 0:te.label},color:{...la.color,...(ve=D())==null?void 0:ve.color},changeTo:((be=D())==null?void 0:be.changeTo)??la.changeTo}}function re({target:te}){h()&&(a(j).contains(te)||a(j).isSameNode(te)?y(!y()):y()&&!a(R).contains(te)&&!L()&&y(!1))}function pe({key:te,target:ve}){var be;if(h())te==="Enter"&&a(j).contains(ve)?(y(!y()),setTimeout(()=>{O=fi(a(R))})):te==="Escape"&&y()&&(y(!1),a(U).contains(ve)&&((be=a(j))==null||be.focus(),O==null||O.destroy()));else return}function me(){var te,ve;if(a(F)&&!z){z=!0,v(l(c(void 0))),n("input",{color:d(),hsv:v(),rgb:l(),hex:c()});return}else if(z&&!a(F)){z=!1,v(a(w)),l(a(E)),c(a(T)),n("input",{color:d(),hsv:v(),rgb:l(),hex:c()});return}if(!v()&&!l()&&!c()){k(F,!0),z=!0,n("input",{color:void 0,hsv:v(),rgb:l(),hex:c()});return}v()&&l()&&v().h===a(w).h&&v().s===a(w).s&&v().v===a(w).v&&v().a===a(w).a&&l().r===a(E).r&&l().g===a(E).g&&l().b===a(E).b&&l().a===a(E).a&&c()===a(T)||(k(F,!1),v()&&v().a===void 0&&v(v().a=1,!0),a(w).a===void 0&&It(w,a(w).a=1),l()&&l().a===void 0&&l(l().a=1,!0),a(E).a===void 0&&It(E,a(E).a=1),((te=c())==null?void 0:te.substring(7))==="ff"&&c(c().substring(0,7)),((ve=c())==null?void 0:ve.substring(7))==="ff"&&c(c().substring(0,7)),v()&&(v().h!==a(w).h||v().s!==a(w).s||v().v!==a(w).v||v().a!==a(w).a||!l()&&!c())?(d(Re(v())),l(d().toRgb()),c(d().toHex())):l()&&(l().r!==a(E).r||l().g!==a(E).g||l().b!==a(E).b||l().a!==a(E).a||!v()&&!c())?(d(Re(l())),c(d().toHex()),v(d().toHsv())):c()&&(c()!==a(T)||!v()&&!l())&&(d(Re(c())),l(d().toRgb()),v(d().toHsv())),d()&&g(d().isDark()),c()&&(k(w,Object.assign({},v())),k(E,Object.assign({},l())),k(T,c()),z=a(F),n("input",{color:d(),hsv:v(),rgb:l(),hex:c()})))}function ue(te){return ve=>{v()||v({...a(w)}),v(v()[te]=ve.detail,!0)}}function de(te){return ve=>{v()||v({...a(w)}),te.forEach(be=>{v()&&v(v()[be]=ve.detail[be],!0)})}}async function se(){if(await On(),_()!=="fixed"&&y()&&h()&&a(j)&&a(R)){const te=a(R).getBoundingClientRect(),ve=a(j).getBoundingClientRect();(_()==="responsive"||_()==="responsive-y")&&(ve.top+te.height+H>a(X)?It(R,a(R).style.top=`-${te.height+H}px`):It(R,a(R).style.top=`${ve.height+H}px`)),(_()==="responsive"||_()==="responsive-x")&&(ve.left+te.width+H>a(M)?It(R,a(R).style.left=`-${te.width-ve.width+H}px`):It(R,a(R).style.left=`${H}px`))}}Oe(()=>(Ee(v()),Ee(l()),Ee(c())),()=>{(v()||l()||c())&&me()}),Oe(()=>a(F),()=>{a(F),me()}),Oe(()=>(a(M),a(X),Ee(y())),()=>{a(M),a(X),y(),se()}),Ct(),dt();var ge=yi();ie("mousedown",ht,re),ie("keyup",ht,pe),ie("scroll",ht,se),mt(ge,te=>k(U,te),()=>a(U));var Ie=p(ge);B(Ie,h,te=>{var ve=ne(),be=G(ve);Le(be,()=>Q().input,(St,Qe)=>{Qe(St,{get labelElement(){return a(j)},set labelElement(At){k(j,At)},isOpen:!0,get hex(){return c()},get label(){return s()},get name(){return i()},$$legacy:!0})}),m(te,ve)},te=>{var ve=ne(),be=G(ve);B(be,i,St=>{var Qe=gi();He(Qe),W(()=>{et(Qe,c()),Z(Qe,"name",i())}),m(St,Qe)},null,!0),m(te,ve)});var xe=b(Ie,2);Le(xe,()=>Q().wrapper,(te,ve)=>{ve(te,{get wrapper(){return a(R)},set wrapper(be){k(R,be)},get isOpen(){return y()},get isDialog(){return h()},children:(be,St)=>{var Qe=bi(),At=G(Qe);B(At,o,oe=>{var _e=ne(),Fe=G(_e),rt=Ce(ae);Le(Fe,()=>Q().nullabilityCheckbox,(st,Ve)=>{Ve(st,{get isUndefined(){return a(F)},set isUndefined(vt){k(F,vt)},get texts(){return a(rt)},$$legacy:!0})}),m(oe,_e)});var we=b(At,2),J=Ce(Q),Me=Ce(()=>{var oe;return((oe=v())==null?void 0:oe.h)??a(w).h}),Be=Ce(()=>{var oe;return((oe=v())==null?void 0:oe.s)??a(w).s}),$e=Ce(()=>{var oe;return((oe=v())==null?void 0:oe.v)??a(w).v}),ke=le(()=>de(["s","v"])),Xe=Ce(ae);Js(we,{get components(){return a(J)},get h(){return a(Me)},get s(){return a(Be)},get v(){return a($e)},get isDark(){return g()},get texts(){return a(Xe)},$$events:{input(...oe){var _e;(_e=a(ke))==null||_e.apply(this,oe)}}});var Ge=b(we,2),nt=p(Ge),Ne=Ce(()=>{var oe;return((oe=v())==null?void 0:oe.h)??a(w).h}),Te=le(()=>ue("h")),De=Ce(()=>I()==="vertical");Xt(nt,{min:0,max:360,step:1,get value(){return a(Ne)},get direction(){return I()},get reverse(){return a(De)},get ariaLabel(){return ae().label.h},$$events:{input(...oe){var _e;(_e=a(Te))==null||_e.apply(this,oe)}}}),u(Ge);var Ze=b(Ge,2);B(Ze,f,oe=>{var _e=_i();const Fe=Ce(()=>(c()?c():a(T)).substring(0,7));W(()=>Ue(_e,"--alphaless-color",a(Fe)));var rt=p(_e),st=Ce(()=>{var Et;return((Et=v())==null?void 0:Et.a)??a(w).a}),Ve=le(()=>ue("a")),vt=Ce(()=>I()==="vertical");Xt(rt,{min:0,max:1,step:.01,get value(){return a(st)},get direction(){return I()},get reverse(){return a(vt)},get ariaLabel(){return ae().label.a},$$events:{input(...Et){var Ut;(Ut=a(Ve))==null||Ut.apply(this,Et)}}}),u(_e),m(oe,_e)});var Se=b(Ze,2);B(Se,A,oe=>{var _e=ne(),Fe=G(_e),rt=Ce(()=>c()??a(T)),st=Ce(()=>l()??a(E)),Ve=Ce(()=>v()??a(w)),vt=Ce(ae);Le(Fe,()=>Q().textInput,(Et,Ut)=>{Ut(Et,{get hex(){return a(rt)},get rgb(){return a(st)},get hsv(){return a(Ve)},get isAlpha(){return f()},get textInputModes(){return x()},get texts(){return a(vt)},$$events:{input:({detail:Mt})=>{Mt.hsv?v(Mt.hsv):Mt.rgb?l(Mt.rgb):Mt.hex&&c(Mt.hex)}}})}),m(oe,_e)});var Ae=b(Se,2);B(Ae,()=>Q().a11yNotice,oe=>{var _e=ne(),Fe=G(_e),rt=Ce(Q),st=Ce(()=>c()||"#00000000");Le(Fe,()=>Q().a11yNotice,(Ve,vt)=>{vt(Ve,{get components(){return a(rt)},get a11yColors(){return P()},get hex(){return a(st)},get a11yTexts(){return N()},get a11yLevel(){return $()}})}),m(oe,_e)}),m(be,Qe)},$$slots:{default:!0},$$legacy:!0})}),u(ge),W(()=>en(ge,`color-picker ${I()??""} svelte-115m8os`)),La("innerWidth",te=>k(M,te)),La("innerHeight",te=>k(X,te)),m(t,ge),he()}var xi=S('<div class="wrapper svelte-9vxuyi" aria-label="color picker"><!></div>');function wi(t,e){let n=C(e,"wrapper",12),r=C(e,"isOpen",8),s=C(e,"isDialog",8);var i=xi();mt(i,l=>n(l),()=>n());var o=p(i);Kt(o,e,"default",{},null),u(i),W(()=>{Z(i,"role",s()?"dialog":void 0),ze(i,"is-open",r())}),m(t,i)}var ca=function(t){var e=t/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},da=function(t){return .2126*ca(t.r)+.7152*ca(t.g)+.0722*ca(t.b)};function ki(t){t.prototype.luminance=function(){return e=da(this.rgba),(n=2)===void 0&&(n=0),r===void 0&&(r=Math.pow(10,n)),Math.round(r*e)/r+0;var e,n,r},t.prototype.contrast=function(e){e===void 0&&(e="#FFF");var n,r,s,i,o,l,v,c=e instanceof t?e:new t(e);return i=this.rgba,o=c.toRgb(),l=da(i),v=da(o),n=l>v?(l+.05)/(v+.05):(v+.05)/(l+.05),(r=2)===void 0&&(r=0),s===void 0&&(s=Math.pow(10,r)),Math.floor(s*n)/s+0},t.prototype.isReadable=function(e,n){return e===void 0&&(e="#FFF"),n===void 0&&(n={}),this.contrast(e)>=(l=(o=(r=n).size)===void 0?"normal":o,(i=(s=r.level)===void 0?"AA":s)==="AAA"&&l==="normal"?7:i==="AA"&&l==="large"?3:4.5);var r,s,i,o,l}}const Si={normal:{AA:4.5,AAA:7},large:{AA:3,AAA:4.5}};function Jt(t,e="normal",n){return t>=Si[e][n]}function Ai({contrast:t,size:e},n){if(!t)return 1;const r=Jt(t,e,"AA");return n==="AA"?r?0:1:r?Jt(t,e,"AAA")?0:1:2}function Nt(t,e="#FFFFFF"){const n=Re(t).toRgb(),r=Re(e).toRgb(),{r:s,g:i,b:o,a:l=255}=n,{r:v,g:c,b:d}=r,g=ua(s,v,l),f=ua(i,c,l),h=ua(o,d,l);return"#"+g+f+h}function ua(t,e,n){return Math.round(e+(t-e)*n).toString(16).padStart(2,"0")}function Ei(t,e){if(e)if(t.reverse){const n=Nt(t.bgHex??"#FFFFFF"),r=Nt(e,n),s=Nt(t.textHex,r);if(!s)return;const i=Re(s);return{...t,trueColors:{textColor:t.textHex,bgColor:r},contrast:i.contrast(r)}}else{if(!t.bgHex)return;const n=Nt(t.bgHex),r=Nt(e,n);if(!r)return;const s=Re(r);return{...t,trueColors:{textColor:e,bgColor:t.bgHex},contrast:s.contrast(n)}}}var Mi=S('<span class="guidelines svelte-1v8klel"><!></span>'),Ii=S('<div class="a11y-notice svelte-1v8klel"><span class="title svelte-1v8klel"> </span> <!> <!></div>');function Ci(t,e){fe(e,!1);const n=ye(),r=ye();let s=C(e,"components",8),i=C(e,"hex",8),o=C(e,"a11yColors",8),l=C(e,"a11yLevel",8),v=C(e,"a11yTexts",8,void 0);Vs([ki]);function c(){return{...vi,...v()}}Oe(()=>(Ee(o()),Ee(i())),()=>{k(n,o().map(_=>Ei(_,i())).filter(Boolean).map(_=>_))}),Oe(()=>(a(n),Ee(l())),()=>{k(r,a(n).map(_=>Ai(_,l())).reduce((_,A)=>_+A))}),Ct(),dt();var d=Ii(),g=p(d),f=p(g,!0);W(()=>Y(f,c().nbGradeSummary(a(r)))),u(g);var h=b(g,2);We(h,1,()=>a(n),qe,(_,A)=>{let x=()=>a(A).trueColors,I=()=>a(A).contrast,L=()=>a(A).placeholder,P=()=>a(A).size;var $=ne(),D=G($);Le(D,()=>s().a11ySingleNotice,(N,E)=>{E(N,on(x,{get contrast(){return I()},get placeholder(){return L()},get size(){return P()},get a11yLevel(){return l()},get contrastText(){return c().contrast}}))}),m(_,$)});var y=b(h,2);B(y,()=>c().guidelines,_=>{var A=Mi(),x=p(A);Sa(x,()=>c().guidelines,!1,!1),u(A),m(_,A)}),u(d),W(()=>Ue(d,"--item-count",a(n).length)),m(t,d),he()}var ji=S('<span class="grade svelte-1q8ip6v">AAA</span>'),Di=S('<p class="lorem svelte-1q8ip6v"> </p> <div><p class="svelte-1q8ip6v"> </p> <span class="grade svelte-1q8ip6v">AA</span> <!></div>',1);function Li(t,e){fe(e,!1);let n=C(e,"placeholder",8,void 0),r=C(e,"size",8,void 0),s=C(e,"a11yLevel",8),i=C(e,"textColor",8),o=C(e,"bgColor",8),l=C(e,"contrast",8,1),v=C(e,"contrastText",8);dt();var c=Di(),d=G(c),g=p(d,!0);u(d);var f=b(d,2),h=p(f),y=p(h);W(()=>Y(y,`${v()??""} ${(l()>=10?l().toFixed(1):l())??""}`)),u(h);var _=b(h,2);const A=Ce(()=>Jt(l(),r(),"AA"));W(()=>ze(_,"grade-ok",a(A)));var x=b(_,2);B(x,()=>s()==="AAA",I=>{var L=ji();const P=Ce(()=>Jt(l(),r(),"AAA"));W(()=>ze(L,"grade-ok",a(P))),m(I,L)}),u(f),W(()=>{ze(d,"large",r()==="large"),Ue(d,"color",i()),Ue(d,"background-color",o()),Y(g,n()||"Lorem Ipsum")}),m(t,c),he()}const Ni={wrapper:wi,a11yNotice:Ci,a11ySingleNotice:Li};var Ti=S('<div class="ColorPicker svelte-13f9w7y"><span class="svelte-13f9w7y"> </span> <!></div>');function Oi(t,e){fe(e,!0);const n=ut();let r=C(e,"value",15),s=K(void 0);var i=Ti(),o=p(i),l=p(o,!0);u(o);var v=b(o,2);B(v,()=>e.label==="Accent Color",c=>{var d=le(()=>r()||"#f6f0dc");Ga(c,{label:"",get hex(){return a(d)},get color(){return a(s)},set color(g){k(s,q(g))},isAlpha:!0,$$events:{input:g=>{r(g.detail.hex),n("input")}}})},c=>{Ga(c,{label:"",components:Ni,get hex(){return r()},get color(){return a(s)},set color(d){k(s,q(d))},isAlpha:!0,a11yColors:[{bgHex:"#7F7F7F",textHex:"#FFF",reverse:!0,placeholder:"button"}],$$events:{input:d=>{r(d.detail.hex),n("input")}}})}),u(i),W(()=>{Z(i,"data-test-id",e.label),Y(l,e.label)}),m(t,i),he()}var Fi=({target:t},e,n)=>{console.log({target:t}),e(`${t.value}px`),n("input")},Ri=S('<label class="svelte-1lkbowu"><span class="svelte-1lkbowu"> </span> <input data-target-id="design-shadow-range" type="range" min="0" max="30" step="2"> <span class="svelte-1lkbowu"> </span></label>');function Pi(t,e){fe(e,!0);const n=ut();let r=C(e,"value",15);var s=Ri(),i=p(s),o=p(i,!0);u(i);var l=b(i,2);He(l),W(()=>et(l,r().slice(0,-2))),l.__input=[Fi,r,n];var v=b(l,2),c=p(v,!0);u(v),u(s),W(()=>{Y(o,e.label),Y(c,r())}),m(t,s),he()}Ye(["input"]);var $i=(t,e,n)=>e(a(n)),zi=S('<button class="svelte-10fus14"> </button>'),Ui=S('<label class="svelte-10fus14"><span class="svelte-10fus14"> </span> <div class="options svelte-10fus14"></div></label>');function Bi(t,e){fe(e,!0);const n=ut();let r=C(e,"value",15);const s=(g,f)=>({label:g,value:f}),i=[s("Flat","0"),s("Low","0.3px 0.5px 0.7px hsl(0deg 36% 56% / 0.34),0.4px 0.8px 1px -1.2px hsl(0deg 36% 56% / 0.34), 1px 2px 2.5px -2.5px hsl(0deg 36% 56% / 0.34)"),s("Medium","0.3px 0.5px 0.7px hsl(0deg 36% 56% / 0.36), 0.8px 1.6px 2px -0.8px hsl(0deg 36% 56% / 0.36), 2.1px 4.1px 5.2px -1.7px hsl(0deg 36% 56% / 0.36), 5px 10px 12.6px -2.5px hsl(0deg 36% 56% / 0.36)"),s("High",`0.3px 0.5px 0.7px hsl(0deg 36% 56% / 0.34),
		1.5px 2.9px 3.7px -0.4px hsl(0deg 36% 56% / 0.34),
		2.7px 5.4px 6.8px -0.7px hsl(0deg 36% 56% / 0.34),
		4.5px 8.9px 11.2px -1.1px hsl(0deg 36% 56% / 0.34),
		7.1px 14.3px 18px -1.4px hsl(0deg 36% 56% / 0.34),
		11.2px 22.3px 28.1px -1.8px hsl(0deg 36% 56% / 0.34),
		17px 33.9px 42.7px -2.1px hsl(0deg 36% 56% / 0.34),
		25px 50px 62.9px -2.5px hsl(0deg 36% 56% / 0.34)`)];function o(g){r(g.value),n("input")}var l=Ui(),v=p(l),c=p(v,!0);u(v);var d=b(v,2);We(d,21,()=>i,qe,(g,f)=>{var h=zi();h.__click=[$i,o,f];var y=p(h,!0);u(h),W(()=>{Z(h,"style",`box-shadow: ${a(f).value??""}`),ze(h,"active",a(f).value===r()),Y(y,a(f).label)}),m(g,h)}),u(d),u(l),W(()=>Y(c,e.label)),m(t,l),he()}Ye(["click"]);var Hi=S('<hr style="border-color: #222; margin: 1rem 0;">'),Wi=S("<!> <!>",1),qi=S('<div class="DesignFields svelte-1wcizjf"></div>');function En(t,e){fe(e,!0);let n=C(e,"values",15);var r=qi();We(r,21,()=>Object.entries(Ia),qe,(s,i,o)=>{let l=()=>a(i)[0],v=()=>a(i)[1].label,c=()=>a(i)[1].type;var d=Wi(),g=G(d);B(g,()=>c()==="font-family",h=>{$s(h,{get label(){return v()},get value(){return n()[l()]},set value(y){n(n()[l()]=y,!0)},$$events:{input(y){Bt.call(this,e,y)}}})},h=>{var y=ne(),_=G(y);B(_,()=>c()==="color",A=>{Oi(A,{get label(){return v()},get value(){return n()[l()]},set value(x){n(n()[l()]=x,!0)},$$events:{input(x){Bt.call(this,e,x)}}})},A=>{var x=ne(),I=G(x);B(I,()=>c()==="border-radius",L=>{Pi(L,{get label(){return v()},get value(){return n()[l()]},set value(P){n(n()[l()]=P,!0)},$$events:{input(P){Bt.call(this,e,P)}}})},L=>{var P=ne(),$=G(P);B($,()=>c()==="box-shadow",D=>{Bi(D,{get label(){return v()},get value(){return n()[l()]},set value(N){n(n()[l()]=N,!0)},$$events:{input(N){Bt.call(this,e,N)}}})},null,!0),m(L,P)},!0),m(A,x)},!0),m(h,y)});var f=b(g,2);B(f,()=>o!==Object.entries(Ia).length-1,h=>{var y=Hi();m(h,y)}),m(s,d)}),u(r),m(t,r),he()}Ye(["click"]);var Gi=S('<div class="check svelte-a3cabr"><!></div>'),Vi=S('<div class="error svelte-a3cabr"><!></div>'),Ki=S('<button class="sidebar-symbol svelte-a3cabr"><div class="symbol svelte-a3cabr"><!> <!></div></button>');function Yi(t,e){fe(e,!0);let n=C(e,"symbol",15),r=C(e,"append",3,""),s=C(e,"checked",3,!1),i=K(0),o=K(void 0),l={},v=K(void 0);async function c(y,_){if(lt.isEqual(l.code,y.code)&&lt.isEqual(l.entries,y.entries))return;let A=await Vn({component:{head:e.site.code.head,css:y.code.css,html:y.code.html,data:y.entries[_]},buildStatic:!0,hydrated:!0});A.error?k(v,q(A.error)):(k(v,null),A.css=A.css,k(o,q(A)),l=lt.cloneDeep({code:y.code,entries:y.entries}))}$t(()=>{}),Fn(()=>{c(n(),"en")});var d=Ki();d.__click=function(...y){var _;(_=e.onclick)==null||_.apply(this,y)};var g=p(d);g.__mousedown=function(...y){var _;(_=e.onmousedown)==null||_.apply(this,y)},g.__mouseup=function(...y){var _;(_=e.onmouseup)==null||_.apply(this,y)};var f=p(g);B(f,s,y=>{var _=Gi(),A=p(_);ce(A,{icon:"material-symbols:check"}),u(_),gt(1,_,()=>_t,()=>({duration:100})),m(y,_)});var h=b(f,2);B(h,()=>a(v),y=>{var _=Vi(),A=p(_);ce(A,{icon:"bxs:error"}),u(_),m(y,_)},y=>{var _=ne(),A=G(_);dn(A,()=>a(o),x=>{var I=ne(),L=G(I);Le(L,()=>Gn,(P,$)=>{$(P,{get height(){return a(i)},set height(D){k(i,q(D))},get append(){return r()},get componentCode(){return a(o)}})}),m(x,I)}),m(y,_)}),u(g),u(d),m(t,d),he()}Ye(["click","mousedown","mouseup"]);var Xi=(t,e,n)=>k(e,q(a(n).id)),Ji=S('<button class="group-item svelte-i6jzjl"> </button>'),Qi=S('<div class="symbol-groups svelte-i6jzjl"></div>'),Zi=(t,e)=>k(e,null),eo=S("<li><!></li>"),to=S('<button class="back-button svelte-i6jzjl"><!> <span>Back to Groups</span></button> <ul class="symbol-list svelte-i6jzjl"><!></ul>',1),ao=S('<div class="BlockPicker svelte-i6jzjl"><!></div>');function no(t,e){fe(e,!0);const n=ct(),r=()=>Ke(xt,"$page",n);let s=C(e,"selected",31,()=>q([])),i=C(e,"append",3,"");async function o(h){console.log({page_id:h});const{data:y,error:_}=await r().data.supabase.from("sections").select("*, symbol(*, site(entries, code)), page(id)").match({"page.id":h});console.log({data:y,error:_});const A=y.filter(x=>x.page).map(x=>x.symbol);return console.log({symbols:A}),A}let l=K(q([]));r().data.supabase.from("pages").select("*").eq("site","1e799b01-77f2-469c-afeb-ab405eee9a4d").then(({data:h})=>{k(l,q(h.filter(y=>y.name!=="Home Page")))});function v(h){s().some(y=>y.id===h.id)||a(d).includes(h.id)?(s(s().filter(y=>y.id!==h.id)),k(d,q(a(d).filter(y=>y!==h.id)))):(s([...s(),Yn({...h,site:e.site.id,id:ea()})]),k(d,q([...a(d),h.id])))}let c=K(null),d=K(q([]));var g=ao(),f=p(g);B(f,()=>!a(c),h=>{var y=Qi();We(y,21,()=>a(l),qe,(_,A)=>{var x=Ji();x.__click=[Xi,c,A];var I=p(x,!0);u(x),W(()=>Y(I,a(A).name)),m(_,x)}),u(y),m(h,y)},h=>{var y=to(),_=G(y);_.__click=[Zi,c];var A=p(_);ce(A,{icon:"ep:back"}),je(2),u(_);var x=b(_,2),I=p(x);Kn(I,()=>o(a(c)),null,(L,P)=>{var $=ne(),D=G($);We(D,17,()=>a(P),qe,(N,E)=>{var w=eo(),T=p(w),F=le(()=>a(d).includes(a(E).id));Yi(T,{get checked(){return a(F)},onclick:()=>v(a(E)),get symbol(){return a(E)},get site(){return e.site},get append(){return i()},controls_enabled:!1}),u(w),m(N,w)}),m(L,$)}),u(x),m(h,y)}),u(g),m(t,g),he()}Ye(["click"]);var ro=(t,e)=>k(e,"identity"),so=(t,e)=>k(e,"design"),io=(t,e)=>k(e,"template"),oo=S('<div class="tabs svelte-y2aliy"><button class="svelte-y2aliy"><!> <span>Details</span></button> <button class="svelte-y2aliy"><!> <span>Design</span></button> <button class="svelte-y2aliy"><!> <span>Starters</span></button></div>'),lo=S('<form class="svelte-y2aliy"><!></form>'),co=S(`<div class="split-container svelte-y2aliy" style="overflow:hidden;"><div style="overflow: auto;"><!></div> <div><!> <div class="design-preview svelte-y2aliy"><h1 class="svelte-y2aliy"> </h1> <h2 class="svelte-y2aliy">We're happy you're here</h2> <button class="svelte-y2aliy">Button</button></div></div></div>`),uo=S('<div class="split-container svelte-y2aliy"><div><form class="svelte-y2aliy"><!> <footer class="svelte-y2aliy"><div id="upload-json" class="svelte-y2aliy"><label class="container svelte-y2aliy"><input type="file" id="primo-json" accept=".json" class="svelte-y2aliy"> <!> <span class="svelte-y2aliy">Duplicate from site file</span></label></div></footer></form></div> <div style="background: #222;border-radius: 0.25rem;"><!></div></div>'),vo=S('<div style="max-height: 75vh; overflow: auto;"><!></div>'),po=S('<div style="max-height: 75vh; overflow: auto;"><div class="addon-item"><h2>Form Builder</h2> <p>Easily build forms and integrate them into your Blocks.</p></div></div>'),fo=S('<div class="creating-site svelte-y2aliy"><!> <span> </span></div>'),ho=S('<footer class="svelte-y2aliy"><!></footer>'),mo=S('<!> <!> <main class="primo-reset primo-modal svelte-y2aliy"><!></main> <!>',1);function go(t,e){fe(e,!0);let n=C(e,"onSuccess",3,(U,j)=>{}),r=C(e,"onCancel",3,()=>{}),s=K(!1),i=K(""),o="",l=K(void 0),v=[],c=K(null),d=K(!1);function g({target:U}){k(d,!0);var j=new window.FileReader;j.onload=async function({target:R}){if(typeof R.result!="string")return;const O=JSON.parse(R.result);O.site.design&&k(h,q(O.site.design));try{k(c,q(Na(O))),x(a(c))}catch(M){console.error(M)}},j.readAsText(U.files[0])}let f=K("identity"),h=K(q({heading_font:"Merriweather",body_font:"Open Sans",brand_color:"#bc2020",accent_color:"#9b92c8",roundness:"8px",depth:"0px 4px 30px rgba(0, 0, 0, 0.2)"})),y=K(q(Rt(a(h))));function _(){k(y,q(Rt(a(h))))}let A=K("");async function x(U){const j=lt.cloneDeep(U.pages.find(R=>R.slug===""));j.page_type=U.page_types.find(R=>R.id===j.page_type),k(A,q((await tn({page:j,site:U.site,page_sections:U.sections.filter(R=>R.page===j.id),page_symbols:U.symbols,page_list:U.pages.map(R=>{var O;return{...R,page_type:((O=R.page_type)==null?void 0:O.id)||U.page_types.find(M=>M.id===R.page_type)}})})).html))}async function I(U){k(A,q(U.preview)),k(l,q(Na(U.data)))}let L=K(q([]));P();async function P(){const{data:U}=await at.get("https://raw.githubusercontent.com/mateomorris/primo-library/main/primo.json");k(L,q(U.symbols))}let $=K(q([]));async function D(){k(s,!0),a(d)?(a(c).site.name=a(i),a(c).site.design=a(h),a(c).site.custom_domain=o,a(c).symbols=[...a(c).symbols,...a($)],n()(a(c),a(A))):(a(l).site.name=a(i),a(l).site.design=a(h),a(l).site.custom_domain=o,a(l).symbols=[...a(l).symbols,...a($)],n()(a(l),a(A),v))}var N=mo(),E=G(N);jt(E,{title:"Create a Site",icon:"gridicons:create",warn:()=>!0,get onclose(){return r()}});var w=b(E,2);B(w,()=>!a(s),U=>{var j=oo(),R=p(j);R.__click=[ro,f];var O=p(R);ce(O,{icon:"octicon:info-16"}),je(2),u(R);var M=b(R,2);M.__click=[so,f];var X=p(M);ce(X,{icon:"solar:pallete-2-bold"}),je(2),u(M);var H=b(M,2);H.__click=[io,f];var V=p(H);ce(V,{icon:"heroicons-solid:template"}),je(2),u(H),u(j),W(()=>{ze(R,"active",a(f)==="identity"),ze(M,"active",a(f)==="design"),ze(H,"active",a(f)==="template")}),m(U,j)});var T=b(w,2),F=p(T);B(F,()=>!a(s),U=>{var j=ne(),R=G(j);B(R,()=>a(f)==="identity",O=>{var M=lo(),X=p(M);Le(X,()=>it.TextInput,(H,V)=>{V(H,{autofocus:!0,label:"Site Name",get value(){return a(i)},set value(Q){k(i,q(Q))}})}),u(M),m(O,M)},O=>{var M=ne(),X=G(M);B(X,()=>a(f)==="design",H=>{var V=co(),Q=p(V),ae=p(Q);En(ae,{get values(){return a(h)},$$events:{input:_}}),u(Q);var re=b(Q,2),pe=p(re);Sa(pe,()=>a(y),!1,!1);var me=b(pe,2),ue=p(me),de=p(ue,!0);u(ue),je(4),u(me),u(re),u(V),W(()=>Y(de,a(i)||"Welcome to CortaCMS")),m(H,V)},H=>{var V=ne(),Q=G(V);B(Q,()=>a(f)==="template",ae=>{var re=uo(),pe=p(re),me=p(pe),ue=p(me);Wr(ue,{get append(){return a(y)},$$events:{select:({detail:be})=>I(be)}});var de=b(ue,2),se=p(de),ge=p(se),Ie=p(ge);Ie.__change=g;var xe=b(Ie,2);ce(xe,{icon:"carbon:upload"}),je(2),u(ge),u(se),u(de),u(me),u(pe);var te=b(pe,2),ve=p(te);B(ve,()=>a(A),be=>{un(be,{style:"height: 100%",get preview(){return a(A)},get append(){return a(y)}})}),u(te),u(re),ie("submit",me,be=>{be.preventDefault(),D()}),m(ae,re)},ae=>{var re=ne(),pe=G(re);B(pe,()=>a(f)==="blocks",me=>{var ue=vo(),de=p(ue),se=le(()=>{var Ie,xe;return((Ie=a(l))==null?void 0:Ie.site)||((xe=a(c))==null?void 0:xe.site)}),ge=le(()=>Rt(a(h)));no(de,{get blocks(){return a(L)},get site(){return a(se)},get selected(){return a($)},set selected(Ie){k($,q(Ie))},get append(){return a(ge)}}),u(ue),m(me,ue)},me=>{var ue=ne(),de=G(ue);B(de,()=>a(f)==="addons",se=>{var ge=po();m(se,ge)},null,!0),m(me,ue)},!0),m(ae,re)},!0),m(H,V)},!0),m(O,M)}),m(U,j)},U=>{var j=fo(),R=p(j);ce(R,{icon:"eos-icons:three-dots-loading",width:"50"});var O=b(R,2),M=p(O);u(O),u(j),W(()=>Y(M,`${(a(d)?"Duplicating":"Creating")??""} ${a(i)??""}`)),m(U,j)}),u(T);var z=b(T,2);B(z,()=>!a(s),U=>{var j=ho(),R=p(j);B(R,()=>a(f)==="identity",O=>{Vt(O,{onclick:()=>k(f,"design"),label:"Design",arrow:!0})},O=>{var M=ne(),X=G(M);B(X,()=>a(f)==="design",H=>{Vt(H,{onclick:()=>k(f,"template"),label:"Starters",arrow:!0})},H=>{var V=ne(),Q=G(V);B(Q,()=>a(f)==="template",ae=>{Vt(ae,{icon:"gridicons:create",onclick:D,label:"Create Site"})},null,!0),m(H,V)},!0),m(O,M)}),u(j),m(U,j)}),m(t,N),he()}Ye(["click","change"]);var _o=(t,e,n,r)=>e(a(n),a(r)),bo=S('<tr><td class="svelte-187fz6p"> </td><td class="svelte-187fz6p"> </td><td class="svelte-187fz6p"><button style="text-decoration: underline">Cancel</button></td></tr>'),yo=S(`<div class="container"><h2 style="display: flex;
				flex-direction: column; margin-bottom: 0.5rem;"><span style="font-weight: 600;
					font-size: 1.25rem;"> </span> <span style="color: #999"> </span></h2> <table style="width: 100%" class="svelte-187fz6p"><thead><tr style="text-align: left; border-bottom: 1px solid #222"><th class="svelte-187fz6p">Subscription</th><th class="svelte-187fz6p">Price</th></tr></thead><tbody></tbody></table></div>`),xo=S('<div class="Invitation svelte-187fz6p"><main class="svelte-187fz6p"><h2>Billing</h2> <!></main></div>');function wo(t,e){fe(e,!0);const n=ct(),r=()=>Ke(xt,"$page",n);async function s(){const{data:c,error:d}=await r().data.supabase.from("collaborators").select("*",{count:"exact",head:!0});d&&console.error(d)}s(),r().data.supabase.channel("schema-db-changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"subscriptions",filter:`user=eq.${r().data.user.id}`},()=>{ln("app:data")}).subscribe();async function i(c,d){if(!window.confirm("Are you sure you want to cancel your subscription?"))return;const{data:f}=await at.post("/api/stripe/cancel-subscription",{subscription_id:d.subscription_id});if(f.success){console.log("Subscription cancelled successfully");const{data:h}=await at.post("/api/deploy/disconnect-domain-name",{site_id:c.id});console.log({data:h})}else alert("Failed to cancel subscription"),console.error(f.error)}var o=xo(),l=p(o),v=b(p(l),2);return We(v,1,()=>r().data.sites.filter(c=>c.subscriptions.length>0),qe,(c,d)=>{var g=yo(),f=p(g),h=p(f),y=p(h,!0);u(h);var _=b(h,2),A=p(_,!0);u(_),u(f);var x=b(f,2),I=b(p(x));We(I,21,()=>a(d).subscriptions,qe,(L,P)=>{var $=bo();const D=le(()=>({CUSTOM_DOMAIN:"Custom Domain",COLLABORATOR:"Collaborator",FORMS:"Forms"})[a(P).type]),N=le(()=>({CUSTOM_DOMAIN:"5",COLLABORATOR:"2",FORMS:"2"})[a(P).type]);var E=p($),w=p(E,!0);u(E);var T=b(E),F=p(T);u(T);var z=b(T),U=p(z);U.__click=[_o,i,d,P],u(z),u($),W(()=>{Y(w,a(D)),Y(F,`$${a(N)??""}/month`)}),m(L,$)}),u(I),u(x),u(g),W(()=>{Y(y,a(d).name),Y(A,a(d).custom_domain)}),m(c,g)}),u(l),u(o),m(t,o),he({get_n_collaborators:s})}Ye(["click"]);zt(cn(an)?"100%":"50%");zt(cn(an)?"100%":"50%");const Va=zt("horizontal");var ko=S("<div><!></div>"),So=S('<span class="grab-handle svelte-12w6s7s"><!></span>'),Ao=S("<!> <!> <!>",1),Eo=S('<!> <main class="svelte-12w6s7s"><!></main>',1);function Mo(t,e){fe(e,!0);const n=ct(),r=()=>Ke(nn,"$site",n),s=()=>Ke(xt,"$page",n),i=()=>Ke(Va,"$orientation",n),o=yt(r().design);let l=K(q(Rt(o))),v=K(!1);function c(){k(l,q(Rt(o)))}let d=K("");f();let g;async function f(){k(v,!0),await L(),await setTimeout(()=>{k(v,!1)},200);async function L(){var P;k(d,q((P=await tn({no_js:!0,site:{...s().data.site,design:o}}))==null?void 0:P.html)),k(h,!0)}}let h=K(!1);$t(()=>{a(l),k(h,!1)});async function y(){rn.update({design:o})}var _=Eo(),A=G(_);jt(A,{icon:"solar:pallete-2-bold",title:"Design",warn:()=>!0,button:{icon:"material-symbols:save",label:"Save",onclick:y,disabled:!1}});var x=b(A,2),I=p(x);Xn(I,{direction:"horizontal",style:"display: flex; height: 100vh; max-height: calc(100vh - 42px)",autoSaveId:"design-panel",children:(L,P)=>{var $=Ao(),D=G($);Ca(D,{defaultSize:50,minSize:20,children:(w,T)=>{var F=ko(),z=p(F);En(z,{values:o,$$events:{input:c}}),u(F),W(()=>Z(F,"style",`
	overflow: auto;
	--label-font-size: 0.875rem;
	--label-font-weight: 400;
	--DesignPanel-brand-color: ${o.brand_color??""};;
	--DesignPanel-font-heading: ${o.heading_font??""};;
	--DesignPanel-border-radius: ${o.roundness??""};
	`)),m(w,F)},$$slots:{default:!0}});var N=b(D,2);Jn(N,{class:"PaneResizer",style:`display: flex;
			align-items: center;
			justify-content: center;`,children:(w,T)=>{var F=So(),z=p(F);ce(z,{icon:"octicon:grabber-16"}),u(F),m(w,F)},$$slots:{default:!0}});var E=b(N,2);Ca(E,{defaultSize:50,children:(w,T)=>{Qn(w,{get orientation(){return $n(),i()},set orientation(F){Za(Va,q(F))},view:"small",get loading(){return a(v)},get append(){return a(l)},get preview(){return a(d)},error:g})},$$slots:{default:!0}}),m(L,$)},$$slots:{default:!0}}),u(x),m(t,_),he()}var Io=S('<img class="og-image svelte-1xmu1iy" alt="og">'),Co=({target:t},e)=>e(t),jo=S(`<span style="pointer-events: none"><!></span> <label aria-label="Add image" style="position: absolute;
				inset: 0;
				cursor: pointer;"><input style="display:none" type="file" accept="image/*"></label>`,1),Do=S('<img class="og-image svelte-1xmu1iy" alt="og">'),Lo=S('<img class="og-image svelte-1xmu1iy" style="opacity: 0.25" alt="og">'),No=({target:t},e)=>e(t),To=S(`<span style="pointer-events: none"><!></span> <label aria-label="Add image" style="position: absolute;
				inset: 0;
				cursor: pointer;"><input style="display:none" type="file" accept="image/*"></label>`,1),Oo=S(`<div class="container svelte-1xmu1iy" style="display: flex;
	flex-wrap: wrap;
	gap: 1rem;"><div class="thumbnail svelte-1xmu1iy"><!></div> <div class="details svelte-1xmu1iy"><h3 style="font-weight: 600"> </h3> <!> <!></div></div>`),Fo=S('<img class="og-image svelte-1xmu1iy" alt="og">'),Ro=S('<img class="og-image svelte-1xmu1iy" style="opacity: 0.25" alt="og">'),Po=S('<span style="pointer-events: none"><!></span>'),$o=(t,e,n)=>k(e,q(a(n))),zo=S('<div class="container og-preview svelte-1xmu1iy"><figure class="thumbnail svelte-1xmu1iy" style="cursor: initial;"><!></figure> <div style="display: grid;"><span style="font-weight: 600;"> </span> <span class="description svelte-1xmu1iy"> </span> <button style="text-decoration:underline;justify-self: flex-start;">edit</button></div></div>'),Uo=S('<img class="og-image svelte-1xmu1iy" alt="og">'),Bo=({target:t},e,n)=>e(a(n).id,t),Ho=S(`<span style="pointer-events: none"><!></span> <label aria-label="Add image" style="position: absolute;
							inset: 0;
							cursor: pointer;"><input style="display:none" type="file" accept="image/*"></label>`,1),Wo=S(`<div class="container svelte-1xmu1iy" style="display: flex;
				flex-wrap: wrap;
				gap: 1rem;"><div class="thumbnail svelte-1xmu1iy"><!></div> <div class="details svelte-1xmu1iy"><h3 style="font-weight: 600"> </h3> <!> <!></div></div>`),qo=S('<img class="og-image svelte-1xmu1iy" alt="og">'),Go=S('<img class="og-image svelte-1xmu1iy" style="opacity: 0.25" alt="og">'),Vo=S('<span style="pointer-events: none"><!></span>'),Ko=(t,e,n)=>k(e,q(a(n))),Yo=S('<div class="container og-preview svelte-1xmu1iy"><figure class="thumbnail svelte-1xmu1iy" style="cursor: initial;"><!></figure> <div style="display: grid;"><span style="font-size:0.75rem;"> </span> <span style="font-weight: 600;"> </span> <span class="description svelte-1xmu1iy"> </span> <button style="text-decoration:underline;justify-self: flex-start;">edit</button></div></div>'),Xo=S(`<!> <main class="svelte-1xmu1iy"><div style="flex:2;display: grid;gap: 0.5rem;overflow: auto;"><h3 style="font-size: 0.875rem;
	font-weight: 500;">Favicon</h3> <div style="display: grid; margin-bottom: 2rem;"><div class="thumbnail svelte-1xmu1iy" style="width: 10rem; aspect-ratio: 1; border-radius: 0;"><!></div></div> <h3 style="font-size: 0.875rem;
    font-weight: 500;">Page Defaults</h3> <div style="display: grid; margin-bottom: 2rem;"><!></div> <h3 style="font-size: 0.875rem;
	font-weight: 500;">Pages</h3> <div style="display: grid;padding-bottom: 1rem;"></div></div> <div style="flex:1; overflow: auto; background: var(--color-gray-1);
	color: var(--color-gray-9);
	padding: 1.5rem;"><h2 style="margin-bottom: 1rem;
    border-bottom: 1px solid var(--color-gray-2);
    padding-bottom: 0.5rem;
    font-weight: 500;
    font-size: 0.875rem;">Social Media Share Previews</h2> <div class="og-container svelte-1xmu1iy"><h3 class="svelte-1xmu1iy"><!> <span>Facebook</span></h3> <div style="display:grid;
			color: black;background-color: rgb(242, 243, 245);"><img style="object-fit: cover;border: 1px solid rgb(218, 221, 225); border-bottom: 0; aspect-ratio: 1.9;" alt="site og"> <div style="display:grid;padding: 10px 12px;background: rgb(242, 243, 245);border: 1px solid rgb(218, 221, 225);"><span style="font-size: 12px;
					text-transform: uppercase;
					color: rgb(96, 103, 112);"> </span> <span style="font-size: 16px;
					font-weight: 600;
					color: rgb(29, 33, 41);"> </span> <span style="color: rgb(96, 103, 112); font-size: 14px; height: 18px; overflow: hidden;     overflow: hidden;
						white-space: nowrap;
						text-overflow: ellipsis;"> </span></div></div></div> <div class="og-container svelte-1xmu1iy"><h3 class="svelte-1xmu1iy"><!> <span>Twitter</span></h3> <div style="position: relative;"><img alt="site og" style="border: 1px solid rgb(225, 232, 237);aspect-ratio: 1.9;    object-fit: cover;    border-radius: 13.7px"> <div style="display:grid;    position: absolute;
				left: 8px;
				bottom: 8px;"><span style="border-radius: 4px;
					background: rgba(0, 0, 0, 0.4);
					color: rgb(255, 255, 255);
					padding: 2px 4px;
					font-size: 12px;"> </span></div></div></div> <div class="og-container svelte-1xmu1iy"><h3 class="svelte-1xmu1iy"><!> <span>Linkedin</span></h3> <div style="display:grid; box-shadow: rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0.1) 0px 4px 6px -1px, rgba(0, 0, 0, 0.1) 0px 2px 4px -2px;"><img alt="site og"> <div style="display:grid;padding:1rem 0.5rem;padding: 10px; "><span style="padding-bottom: 2px;
					font-size: 16px;
					font-weight: 600;
					line-height: 24px;
					color: #000000e6;"> </span> <span style="    font-size: 12px;
					color: rgba(0, 0, 0, 0.6);
					text-transform: uppercase;"> </span></div></div></div></div></main>`,1);function Jo(t,e){fe(e,!0);const n=ct(),r=()=>Ke(nn,"$site",n),s=()=>Ke(ja,"$pages",n);let i=K(q(yt(r()))),o=K(q(yt(s())));function l(we){k(f,q(yt(we)))}async function v(we,J){const Me=J.files[0],Be=`${r().id}/metadata/${we}/${Me.name}`,{url:$e}=await ta({bucket:"images",action:"upload",key:Be,file:Me,options:{}});$e&&k(o,q(a(o).map(ke=>ke.id===we?{...ke,metadata:{...ke.metadata,image:$e}}:ke)))}async function c(we){const J=we.files[0],Me=`${r().id}/metadata/${J.name}`,{url:Be}=await ta({bucket:"images",action:"upload",key:Me,file:J,options:{}});Be&&k(i,q({...a(i),metadata:{...a(i).metadata,image:Be}}))}async function d(we){const J=we.files[0],Me=`${r().id}/metadata/favicon--${J.name}`,Be=await ta({bucket:"images",action:"upload",key:Me,file:J,options:{}});console.log({res:Be})}async function g(){const we=[];for(let J=0;J<a(o).length;(J+=1)-1)Da(a(o)[J].metadata,s()[J].metadata)||we.push(a(o)[J]);await Promise.all(we.map(async J=>{await ja.update(J.id,{metadata:J.metadata})})),Da(a(i).metadata,r().metadata)||await rn.update({metadata:a(i).metadata}),Nn(),console.log("done",{changed_pages:we})}let f=K(q(a(i)));var h=Xo(),y=G(h);jt(y,{icon:"octicon:info-16",title:"Metadata",warn:()=>!0,button:{icon:"material-symbols:save",label:"Save",onclick:g,disabled:!1}});var _=b(y,2),A=p(_),x=b(p(A),2),I=p(x),L=p(I);B(L,()=>a(i).metadata.favicon,we=>{var J=Io();W(()=>Z(J,"src",a(i).metadata.favicon)),m(we,J)},we=>{var J=jo(),Me=G(J),Be=p(Me);ce(Be,{icon:"bx:image"}),u(Me);var $e=b(Me,2),ke=p($e);ke.__change=[Co,d],u($e),m(we,J)}),u(I),u(x);var P=b(x,4),$=p(P);B($,()=>a(f).id===a(i).id,we=>{var J=Oo(),Me=p(J),Be=p(Me);B(Be,()=>a(i).metadata.image,Ne=>{var Te=Do();W(()=>Z(Te,"src",a(i).metadata.image)),m(Ne,Te)},Ne=>{var Te=ne(),De=G(Te);B(De,()=>a(i).metadata.image,Ze=>{var Se=Lo();W(()=>Z(Se,"src",a(i).metadata.image)),m(Ze,Se)},Ze=>{var Se=To(),Ae=G(Se),oe=p(Ae);ce(oe,{icon:"bx:image"}),u(Ae);var _e=b(Ae,2),Fe=p(_e);Fe.__change=[No,c],u(_e),m(Ze,Se)},!0),m(Ne,Te)}),u(Me);var $e=b(Me,2),ke=p($e),Xe=p(ke,!0);u(ke);var Ge=b(ke,2);Le(Ge,()=>it.TextInput,(Ne,Te)=>{Te(Ne,{label:"Title",get value(){return a(i).metadata.title},set value(De){a(i).metadata.title=De},$$events:{input:()=>l(a(i))}})});var nt=b(Ge,2);Le(nt,()=>it.TextInput,(Ne,Te)=>{Te(Ne,{label:"Description",get placeholder(){return a(i).metadata.description},get value(){return a(i).metadata.description},set value(De){a(i).metadata.description=De},$$events:{input:()=>l(a(i))}})}),u($e),u(J),W(()=>Y(Xe,a(i).name)),gt(1,J,()=>_t,()=>({duration:100})),m(we,J)},we=>{var J=zo(),Me=p(J),Be=p(Me);B(Be,()=>a(i).metadata.image,Te=>{var De=Fo();W(()=>Z(De,"src",a(i).metadata.image)),m(Te,De)},Te=>{var De=ne(),Ze=G(De);B(Ze,()=>a(i).metadata.image,Se=>{var Ae=Ro();W(()=>Z(Ae,"src",a(i).metadata.image)),m(Se,Ae)},Se=>{var Ae=Po(),oe=p(Ae);ce(oe,{icon:"bx:image"}),u(Ae),m(Se,Ae)},!0),m(Te,De)}),u(Me);var $e=b(Me,2),ke=p($e),Xe=p(ke,!0);u(ke);var Ge=b(ke,2),nt=p(Ge,!0);u(Ge);var Ne=b(Ge,2);Ne.__click=[$o,f,i],u($e),u(J),W(()=>{Y(Xe,a(i).metadata.title),Y(nt,a(i).metadata.description)}),m(we,J)}),u(P);var D=b(P,4);We(D,21,()=>a(o),qe,(we,J)=>{var Me=ne(),Be=G(Me);B(Be,()=>a(f).id===a(J).id,$e=>{var ke=Wo(),Xe=p(ke),Ge=p(Xe);B(Ge,()=>a(J).metadata.image||a(i).metadata.image,Se=>{var Ae=Uo();W(()=>Z(Ae,"src",a(J).metadata.image||a(i).metadata.image)),m(Se,Ae)},Se=>{var Ae=Ho(),oe=G(Ae),_e=p(oe);ce(_e,{icon:"bx:image"}),u(oe);var Fe=b(oe,2),rt=p(Fe);rt.__change=[Bo,v,J],u(Fe),m(Se,Ae)}),u(Xe);var nt=b(Xe,2),Ne=p(nt),Te=p(Ne,!0);u(Ne);var De=b(Ne,2);Le(De,()=>it.TextInput,(Se,Ae)=>{Ae(Se,{label:"Title",get placeholder(){return a(i).metadata.title},get value(){return a(J).metadata.title},set value(oe){a(J).metadata.title=oe},$$events:{input:()=>l(a(J))}})});var Ze=b(De,2);Le(Ze,()=>it.TextInput,(Se,Ae)=>{Ae(Se,{label:"Description",get placeholder(){return a(i).metadata.description},get value(){return a(J).metadata.description},set value(oe){a(J).metadata.description=oe},$$events:{input:()=>l(a(J))}})}),u(nt),u(ke),W(()=>Y(Te,a(J).name)),gt(1,ke,()=>_t,()=>({duration:100})),m($e,ke)},$e=>{var ke=Yo(),Xe=p(ke),Ge=p(Xe);B(Ge,()=>a(J).metadata.image,_e=>{var Fe=qo();W(()=>Z(Fe,"src",a(J).metadata.image)),m(_e,Fe)},_e=>{var Fe=ne(),rt=G(Fe);B(rt,()=>a(i).metadata.image,st=>{var Ve=Go();W(()=>Z(Ve,"src",a(i).metadata.image)),m(st,Ve)},st=>{var Ve=Vo(),vt=p(Ve);ce(vt,{icon:"bx:image"}),u(Ve),m(st,Ve)},!0),m(_e,Fe)}),u(Xe);var nt=b(Xe,2),Ne=p(nt),Te=p(Ne,!0);u(Ne);var De=b(Ne,2),Ze=p(De,!0);u(De);var Se=b(De,2),Ae=p(Se,!0);u(Se);var oe=b(Se,2);oe.__click=[Ko,f,J],u(nt),u(ke),W(()=>{Y(Te,a(J).name),Y(Ze,a(J).metadata.title||a(i).metadata.title),Y(Ae,a(J).metadata.description||a(i).metadata.description)}),m($e,ke)}),m(we,Me)}),u(D),u(A);var N=b(A,2),E=b(p(N),2),w=p(E),T=p(w);ce(T,{icon:"ic:baseline-facebook"}),je(2),u(w);var F=b(w,2),z=p(F),U=b(z,2),j=p(U),R=p(j,!0);u(j);var O=b(j,2),M=p(O,!0);u(O);var X=b(O,2),H=p(X,!0);u(X),u(U),u(F),u(E);var V=b(E,2),Q=p(V),ae=p(Q);ce(ae,{icon:"ri:twitter-x-fill"}),je(2),u(Q);var re=b(Q,2),pe=p(re),me=b(pe,2),ue=p(me),de=p(ue,!0);u(ue),u(me),u(re),u(V);var se=b(V,2),ge=p(se),Ie=p(ge);ce(Ie,{icon:"mdi:linkedin"}),je(2),u(ge);var xe=b(ge,2),te=p(xe),ve=b(te,2),be=p(ve),St=p(be,!0);u(be);var Qe=b(be,2),At=p(Qe,!0);u(Qe),u(ve),u(xe),u(se),u(N),u(_),W(()=>{Z(z,"src",a(f).metadata.image||a(i).metadata.image),Y(R,a(i).custom_domain||`${a(i).id}.breezly.site`),Y(M,a(f).metadata.title),Y(H,a(f).metadata.description),Z(pe,"src",a(f).metadata.image||a(i).metadata.image),Y(de,a(i).custom_domain||`${a(i).id}.breezly.site`),Z(te,"src",a(f).metadata.image||a(i).metadata.image),Y(St,a(f).metadata.title),Y(At,a(i).custom_domain||`${a(i).id}.breezly.site`)}),m(t,h),he()}Ye(["change","click"]);var Mn={exports:{}};(function(t,e){(function(n,r){r()})(Lt,function(){function n(c,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,d,g){var f=new XMLHttpRequest;f.open("GET",c),f.responseType="blob",f.onload=function(){v(f.response,d,g)},f.onerror=function(){console.error("could not download file")},f.send()}function s(c){var d=new XMLHttpRequest;d.open("HEAD",c,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function i(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Lt=="object"&&Lt.global===Lt?Lt:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(c,d,g){var f=o.URL||o.webkitURL,h=document.createElement("a");d=d||c.name||"download",h.download=d,h.rel="noopener",typeof c=="string"?(h.href=c,h.origin===location.origin?i(h):s(h.href)?r(c,d,g):i(h,h.target="_blank")):(h.href=f.createObjectURL(c),setTimeout(function(){f.revokeObjectURL(h.href)},4e4),setTimeout(function(){i(h)},0))}:"msSaveOrOpenBlob"in navigator?function(c,d,g){if(d=d||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,g),d);else if(s(c))r(c,d,g);else{var f=document.createElement("a");f.href=c,f.target="_blank",setTimeout(function(){i(f)})}}:function(c,d,g,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof c=="string")return r(c,d,g);var h=c.type==="application/octet-stream",y=/constructor/i.test(o.HTMLElement)||o.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||h&&y||l)&&typeof FileReader<"u"){var A=new FileReader;A.onloadend=function(){var L=A.result;L=_?L:L.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=L:location=L,f=null},A.readAsDataURL(c)}else{var x=o.URL||o.webkitURL,I=x.createObjectURL(c);f?f.location=I:location.href=I,f=null,setTimeout(function(){x.revokeObjectURL(I)},4e4)}});o.saveAs=v.saveAs=v,t.exports=v})})(Mn);var Qo=Mn.exports;const Zo=Zn(Qo);var In="https://js.stripe.com/v3",el=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Ka="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",tl=function(){for(var e=document.querySelectorAll('script[src^="'.concat(In,'"]')),n=0;n<e.length;n++){var r=e[n];if(el.test(r.src))return r}return null},Ya=function(e){var n="",r=document.createElement("script");r.src="".concat(In).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},al=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"4.8.0",startTime:n})},Tt=null,qt=null,Gt=null,nl=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},rl=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},sl=function(e){return Tt!==null?Tt:(Tt=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(Ka),window.Stripe){n(window.Stripe);return}try{var s=tl();if(s&&e)console.warn(Ka);else if(!s)s=Ya(e);else if(s&&Gt!==null&&qt!==null){var i;s.removeEventListener("load",Gt),s.removeEventListener("error",qt),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=Ya(e)}Gt=rl(n,r),qt=nl(r),s.addEventListener("load",Gt),s.addEventListener("error",qt)}catch(o){r(o);return}}),Tt.catch(function(n){return Tt=null,Promise.reject(n)}))},il=function(e,n,r){if(e===null)return null;var s=e.apply(void 0,n);return al(s,r),s},Ot,Cn=!1,jn=function(){return Ot||(Ot=sl(null).catch(function(e){return Ot=null,Promise.reject(e)}),Ot)};Promise.resolve().then(function(){return jn()}).catch(function(t){Cn||console.warn(t)});var ol=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Cn=!0;var s=Date.now();return jn().then(function(i){return il(i,n,s)})};const ll=typeof window>"u";function Xa(t){if(!ll)return t.registerAppInfo({name:"svelte-stripe-js",url:"https://svelte-stripe-js.vercel.app"})}var cl=S("<div></div>");function dl(t,e){fe(e,!1);let n=C(e,"stripe",8),r=C(e,"clientSecret",8),s=ye(),i=ye();rr(()=>{var v;(v=a(i))==null||v.destroy()}),Oe(()=>(Ee(n()),Xa),()=>{n()&&Xa(n())}),Oe(()=>(Ee(n()),Ee(r()),a(s),a(i)),()=>{n()&&r()&&a(s)&&n().initEmbeddedCheckout({clientSecret:r()}).then(v=>{k(i,v),a(i).mount(a(s))})}),Ct(),dt();var o=ne(),l=G(o);B(l,()=>n()&&r(),v=>{var c=cl();mt(c,d=>k(s,d),()=>a(s)),m(v,c)}),m(t,o),he()}var ul=S(`<div style="display: flex;justify-content: center;
  height: 100%;
  align-items: center;"><!></div>`);function vl(t,e){fe(e,!0);const n=ct(),r=()=>Ke(xt,"$page",n);let s=C(e,"metadata",19,()=>({})),i=K(void 0);at.post("/api/stripe/create-payment-intent",{price_id:e.price_id,user:r().data.user,metadata:s(),redirect_url:""}).then(({data:c})=>{k(i,q(c==null?void 0:c.clientSecret)),console.log({data:c,clientSecret:a(i)})});let o=K(null);sr(async()=>{k(o,q(await ol(er)))});var l=ne(),v=G(l);B(v,()=>a(i),c=>{dl(c,{get stripe(){return a(o)},get clientSecret(){return a(i)}})},c=>{var d=ul(),g=p(d);ce(g,{icon:"eos-icons:three-dots-loading",width:"50px",height:"50px"}),u(d),m(c,d)}),m(t,l),he()}var pl=S('<div class="EmailInvoice svelte-1ptb02a"><main class="svelte-1ptb02a"><form class="svelte-1ptb02a"><label class="subheading svelte-1ptb02a" for="email">Email invoice</label> <div class="svelte-1ptb02a"><div class="input-group svelte-1ptb02a"><input type="email" placeholder="Email address" name="email" class="svelte-1ptb02a"></div> <button type="submit" class="svelte-1ptb02a"><!></button></div></form></main></div>');function fl(t,e){fe(e,!0);const n=ct(),r=()=>Ke(xt,"$page",n);let s=C(e,"metadata",19,()=>({}));const i=r().data.site;let o=K(!1),l=K("");async function v(){k(o,!0);const{data:x}=await at.post("/api/stripe/email-invoice",{email:a(l),price_id:e.price_id,site:i,metadata:s()});alert(x?"The invoice has been sent. When it's paid, the feature will become available.":"Could not send invoice. Please try again."),k(l,""),k(o,!1)}var c=pl(),d=p(c),g=p(d),f=b(p(g),2),h=p(f),y=p(h);He(y),u(h);var _=b(h,2),A=p(_);B(A,()=>a(o),x=>{ce(x,{icon:"eos-icons:three-dots-loading"})},x=>{var I=Ja("Send invoice");m(x,I)}),u(_),u(f),u(g),u(d),u(c),ie("submit",g,x=>{x.preventDefault(),v()}),sn(y,()=>a(l),x=>k(l,x)),m(t,c),he()}var hl=["second","minute","hour","day","week","month","year"];function ml(t,e){if(e===0)return["just now","right now"];var n=hl[Math.floor(e/2)];return t>1&&(n+="s"),[t+" "+n+" ago","in "+t+" "+n]}var gl=["秒","分钟","小时","天","周","个月","年"];function _l(t,e){if(e===0)return["刚刚","片刻后"];var n=gl[~~(e/2)];return[t+" "+n+"前",t+" "+n+"后"]}var ka={},Dn=function(t,e){ka[t]=e},bl=function(t){return ka[t]||ka.en_US},va=[60,60,24,7,365/7/12,12];function yl(t){return t instanceof Date?t:!isNaN(t)||/^\d+$/.test(t)?new Date(parseInt(t)):(t=(t||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(t))}function xl(t,e){var n=t<0?1:0;t=Math.abs(t);for(var r=t,s=0;t>=va[s]&&s<va.length;s++)t/=va[s];return t=Math.floor(t),s*=2,t>(s===0?9:1)&&(s+=1),e(t,s,r)[n].replace("%s",t.toString())}function wl(t,e){var n=new Date;return(+n-+yl(t))/1e3}var Ln=function(t,e,n){var r=wl(t);return xl(r,bl(e))};Dn("en_US",ml);Dn("zh_CN",_l);async function kl(t,e,n,r){k(e,q(a(e).map(s=>s.id===a(n).id?yt(a(n)):s))),await Ft({table:"forms",action:"update",id:a(n).id,data:{name:a(n).name,fields:a(n).fields,recipients:a(n).recipients}}),delete a(n).submissions,await r().data.supabase.rpc("update_form_content",{target_id:a(n).id,new_form_value:a(n)}),ln("app:data"),k(n,null)}var Sl=(t,e)=>e("forms"),Al=(t,e)=>e("submissions"),El=S('<button class="svelte-1dxs1oy"><!> <span>Forms</span></button> <button class="svelte-1dxs1oy"><!> <span>Submissions</span></button>',1),Ml=S('<div class="tabs svelte-1dxs1oy"><!></div>'),Il=S(`<div style="max-height: 80vh; flex:1; background: var(--color-gray-9);
overflow: scroll"><!></div>`),Cl=S('<div style="padding: 1rem 1.5rem"><!></div>'),jl=S('<div class="form svelte-1dxs1oy"><!>  <!> <!> <button style="display: flex;align-items: center;justify-content: center;gap: 0.25rem;" class="svelte-1dxs1oy"><span>Update Form</span> <!></button></div>'),Dl=S('<li class="svelte-1dxs1oy"><!></li>'),Ll=S('<ul class="form-list svelte-1dxs1oy"></ul>'),Nl=S('<div class="form svelte-1dxs1oy"><!>  <!> <button style="display: flex;align-items: center;justify-content: center;gap: 0.25rem;" class="svelte-1dxs1oy"><span>Create Form</span> <!></button></div>'),Tl=S('<div class="forms"><!> <!></div>'),Ol=S('<li class="svelte-1dxs1oy"><!></li>'),Fl=S('<ul class="form-list svelte-1dxs1oy"></ul>'),Rl=S(`<div style="
		padding: 1rem;
		padding-top: 0;
		display: grid;
		 gap: 1rem;"><p>This is where you'll be able to view your form submissions.</p></div>`),Pl=S('<div class="submissions"><!></div>'),$l=S('<!> <main class="svelte-1dxs1oy"><!></main>',1);function zl(t,e){fe(e,!0);const n=ct(),r=()=>Ke(xt,"$page",n);let s=K(null);Ft({table:"forms",action:"select",data:"button, error_message, success_message, name, id, fields, submissions:form_submissions(*), recipients",match:{site:r().data.site.id}}).then(D=>{k(s,q(yt(D)))});let i=K(q(localStorage.getItem("UserForms.current_step")||"forms"));function o(D){localStorage.setItem("UserForms.current_step",D),k(i,q(D))}const l=D=>({id:ea(),button:D.button||"",fields:D.fields||[],name:D.name||"",success_message:D.success_message||"",error_message:D.error_message||"",site:r().data.site.id});let v=K(!1),c=K(""),d="",g="",f="",h=K(q({label:"Form Inputs",key:"form-inputs",value:[],fields:[{key:"label",type:"text",label:"Field Label",fields:[],value:""},{key:"type",type:"select",label:"Type",fields:[],value:"text",options:{selected:"text",options:[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"tel",label:"Phone Number"},{value:"email",label:"Email"},{value:"url",label:"URL"},{value:"date",label:"Date"}]}},{key:"placeholder",type:"text",label:"Placeholder",fields:[],value:""}]}));async function y(D){const N=D.submissions.map(F=>({id:F.id,...F.data,created_at:F.created_at})),E=T(N),w=new Blob([E],{type:"text/csv;charset=utf-8;"});Zo.saveAs(w,`${D.name} submissions.csv`);function T(F){const z=[],U=Object.keys(F[0]);z.push(U.join(","));for(const j of F){const R=U.map(O=>`"${(""+j[O]).replace(/"/g,'\\"')}"`);z.push(R.join(","))}return z.join(`
`)}}async function _(){const D=l({name:a(c),button:d,fields:yt(a(h).value),success_message:g,error_message:f});k(s,q([...a(s),D])),await Ft({table:"forms",action:"insert",data:D}),k(v,!1),k(c,""),d="",a(h).fields=[],g="",f=""}async function A(D){await Ft({table:"forms",action:"delete",id:D}),k(s,q(a(s).filter(N=>N.id!==D)))}let x=K(null);var I=$l(),L=G(I);jt(L,{title:N=>{var E=Ml(),w=p(E);B(w,()=>["forms","submissions"].includes(a(i)),T=>{var F=El(),z=G(F);z.__click=[Sl,o];var U=p(z);ce(U,{icon:"fluent:form-multiple-48-filled"}),je(2),u(z);var j=b(z,2);j.__click=[Al,o];var R=p(j);ce(R,{icon:"fa6-solid:paper-plane"}),je(2),u(j),W(()=>{ze(z,"active",a(i)==="forms"),ze(j,"active",a(i)==="submissions")}),m(T,F)}),u(E),m(N,E)},$$slots:{title:!0}});var P=b(L,2),$=p(P);B($,()=>a(i)==="checkout",D=>{var N=Il(),E=p(N),w=le(()=>({subscription:"FORMS",uid:r().data.user.id,site_id:r().data.site.id}));vl(E,{price_id:"price_1OmiV3AELMGfXjn7fcu4INN6",get metadata(){return a(w)}}),u(N),m(D,N)},D=>{var N=ne(),E=G(N);B(E,()=>a(i)==="email_invoice",w=>{var T=Cl(),F=p(T),z=le(()=>({subscription:"FORMS",uid:r().data.user.id,site_id:r().data.site.id}));fl(F,{price_id:"price_1OmiV3AELMGfXjn7fcu4INN6",get metadata(){return a(z)}}),u(T),m(w,T)},w=>{var T=ne(),F=G(T);B(F,()=>a(i)==="forms",z=>{var U=Tl(),j=p(U);B(j,()=>a(s),O=>{var M=Ll();We(M,21,()=>a(s),qe,(X,H)=>{var V=ne(),Q=G(V);B(Q,()=>{var ae;return((ae=a(x))==null?void 0:ae.id)===a(H).id},ae=>{var re=jl(),pe=p(re);Le(pe,()=>it.TextInput,(xe,te)=>{te(xe,{get value(){return a(x).name},set value(ve){a(x).name=ve},label:"Form Name"})});var me=b(pe,2),ue=le(()=>({...a(h),label:"Form Fields",value:a(H).fields}));aa(me,{show_label:!0,get field(){return a(ue)},$$events:{input:({detail:xe})=>{a(x).fields=xe.value}}});var de=b(me,2),se=le(()=>({fields:[{key:"email",type:"text",label:"Email Address",fields:[],value:""}],value:a(H).recipients.map(xe=>({email:xe}))||[],key:"recipient",type:"text",label:"Recipients"}));aa(de,{show_label:!0,get field(){return a(se)},hidden_keys:["id"],$$events:{input:({detail:xe})=>{a(x).recipients=xe.value.map(te=>te.email)}}});var ge=b(de,2);ge.disabled=!1,ge.__click=[kl,s,x,r];var Ie=b(p(ge),2);ce(Ie,{icon:"akar-icons:check"}),u(ge),u(re),gt(1,re,()=>_t,()=>({duration:100})),m(ae,re)},ae=>{var re=Dl(),pe=p(re),me=le(()=>{var se;return`${((se=a(H).fields)==null?void 0:se.length)??""} Fields`}),ue=le(()=>a(H).fields.map(se=>({title:se.label,subtitle:se.type}))),de=le(()=>[{on_click:()=>{k(x,q(yt(a(H))))},icon:"uil:edit",label:"Edit"},{on_click:()=>A(a(H).id),icon:"material-symbols:delete",label:"Delete"}]);Le(pe,()=>it.ListItem,(se,ge)=>{ge(se,{get title(){return a(H).name},get subtitle(){return a(me)},get children(){return a(ue)},get popup_menu(){return a(de)}})}),u(re),m(ae,re)}),m(X,V)}),u(M),m(O,M)});var R=b(j,2);B(R,()=>a(v),O=>{var M=Nl(),X=p(M);Le(X,()=>it.TextInput,(ae,re)=>{re(ae,{autofocus:!0,get value(){return a(c)},set value(pe){k(c,q(pe))},label:"Form Name"})});var H=b(X,2);B(H,()=>a(s),ae=>{aa(ae,{get field(){return a(h)},set field(re){k(h,q(re))},hidden_keys:["id"]})});var V=b(H,2);V.disabled=!1,V.__click=_;var Q=b(p(V),2);ce(Q,{icon:"akar-icons:check"}),u(V),u(M),gt(1,M,()=>_t,()=>({duration:100})),m(O,M)},O=>{var M=ne(),X=G(M);B(X,()=>!a(x),H=>{Vt(H,{disabled:!1,onclick:()=>{k(v,!0)},label:"New Form",icon:"akar-icons:plus"})},null,!0),m(O,M)}),u(U),m(z,U)},z=>{var U=ne(),j=G(U);B(j,()=>a(i)==="submissions",R=>{var O=Pl(),M=p(O);B(M,()=>{var X;return((X=a(s))==null?void 0:X.length)>0},X=>{var H=Fl();We(H,21,()=>a(s),qe,(V,Q)=>{var ae=Ol(),re=p(ae),pe=le(()=>{var de;return`${((de=a(Q).fields)==null?void 0:de.length)??""} Fields`}),me=le(()=>{var de;return(de=a(Q).submissions)==null?void 0:de.map(se=>({title:Object.entries(se.data)[0][1],subtitle:Ln(se.created_at),children:Object.entries(se.data).map(([ge,Ie])=>({title:Ie,subtitle:ge})),popup_menu:[{icon:"fluent:delete-20-filled",label:"Delete",on_click:async()=>{var Ie;await Ft({table:"form_submissions",action:"delete",match:{id:se.id}});const ge=(Ie=a(Q).submissions)==null?void 0:Ie.filter(xe=>xe.id!==se.id);k(s,q(a(s).map(xe=>xe.id===a(Q).id?{...xe,submissions:ge}:xe)))}}]}))}),ue=le(()=>[{on_click:()=>{y(a(Q))},label:"Download as CSV",icon:"material-symbols:download"}]);Le(re,()=>it.ListItem,(de,se)=>{se(de,{get title(){return a(Q).name},get subtitle(){return a(pe)},get children(){return a(me)},get popup_menu(){return a(ue)}})}),u(ae),m(V,ae)}),u(H),m(X,H)},X=>{var H=Rl();m(X,H)}),u(O),m(R,O)},null,!0),m(z,U)},!0),m(w,T)},!0),m(D,N)}),u(P),m(t,I),he()}Ye(["click"]);var Ul=S('<li class="svelte-jrw41l"><span class="letter svelte-jrw41l"> </span> <span class="email svelte-jrw41l"> </span> <span> </span></li>'),Bl=S('<section><h3 class="subheading svelte-jrw41l">Invitations</h3> <ul class="svelte-jrw41l"></ul></section>'),Hl=S('<li class="svelte-jrw41l"><span class="letter svelte-jrw41l"> </span> <span class="email svelte-jrw41l"> </span> <span class="role">Owner</span></li>'),Wl=S('<li class="svelte-jrw41l"><span class="letter svelte-jrw41l"> </span> <span class="email svelte-jrw41l"> </span> <span class="role">Editor</span></li>'),ql=S('<!> <div class="Invitation svelte-jrw41l"><main class="svelte-jrw41l"><h2 class="svelte-jrw41l">Invite site collaborator</h2> <form class="svelte-jrw41l"><label class="subheading svelte-jrw41l" for="email">Enter collaborator email</label> <div class="svelte-jrw41l"><div class="input-group svelte-jrw41l"><input type="email" placeholder="Email address" name="email" class="svelte-jrw41l"> <select class="svelte-jrw41l"><option>Developer</option><option>Content Editor</option></select></div> <button type="submit" class="svelte-jrw41l"><!></button></div></form> <!> <section><h3 class="subheading svelte-jrw41l">People with Access</h3> <ul class="svelte-jrw41l"><!> <!></ul></section></main></div>',1);function Gl(t,e){fe(e,!0);const n=ct(),r=()=>Ke(xt,"$page",n),s=r().data.site;let i=K(!1),o=K(""),l=K("DEV");async function v(){k(i,!0);const{data:M}=await at.post("/api/collaboration/collaborators",{site:s,email:a(o),role:a(l),url:r().url.origin});M?(g(),h()):alert("Could not send invitation. Please try again."),k(o,""),k(i,!1)}let c=K(q([])),d=le(()=>a(c)[0]);g();async function g(){const{data:M}=await at.get(`/api/collaboration/collaborators?site_id=${s.id}`);M&&k(c,q(M))}let f=K(q([]));h();async function h(){const{data:M}=await at.get(`/api/collaboration/invitations?site_id=${s.id}`);M&&k(f,q(M))}var y=ql(),_=G(y);jt(_,{title:"Editors",icon:"clarity:users-solid",warn:()=>!0});var A=b(_,2),x=p(A),I=b(p(x),2),L=b(p(I),2),P=p(L),$=p(P);He($);var D=b($,2),N=p(D);N.value=(N.__value="DEV")==null?"":"DEV";var E=b(N);E.value=(E.__value="EDITOR")==null?"":"EDITOR",u(D),u(P);var w=b(P,2),T=p(w);B(T,()=>a(i),M=>{ce(M,{icon:"eos-icons:three-dots-loading"})},M=>{var X=Ja("Send invite");m(M,X)}),u(w),u(L),u(I);var F=b(I,2);B(F,()=>a(f).length>0,M=>{var X=Bl(),H=b(p(X),2);We(H,21,()=>a(f).sort((Q,ae)=>new Date(ae.created_at)-new Date(Q.created_at)),qe,(Q,ae)=>{let re=()=>a(ae).email,pe=()=>a(ae).created_at;var me=Ul(),ue=p(me),de=p(ue,!0);u(ue);var se=b(ue,2),ge=p(se,!0);u(se);var Ie=b(se,2),xe=p(Ie);W(()=>Y(xe,`Sent ${Ln(pe())??""}`)),u(Ie),u(me),W(()=>{Y(de,re()[0]),Y(ge,re())}),m(Q,me)}),u(H),u(X),m(M,X)});var z=b(F,2),U=b(p(z),2),j=p(U);B(j,()=>a(d),M=>{var X=Hl(),H=p(X),V=p(H,!0);u(H);var Q=b(H,2),ae=p(Q,!0);u(Q),je(2),u(X),W(()=>{Y(V,a(d).email[0]),Y(ae,a(d).email)}),m(M,X)});var R=b(j,2);return We(R,17,()=>a(c).slice(1),qe,(M,X)=>{let H=()=>a(X).email;var V=Wl(),Q=p(V),ae=p(Q,!0);u(Q);var re=b(Q,2),pe=p(re,!0);u(re),je(2),u(V),W(()=>{Y(ae,H()[0]),Y(pe,H())}),m(M,V)}),u(U),u(z),u(x),u(A),ie("submit",I,M=>{M.preventDefault(),v()}),sn($,()=>a(o),M=>k(o,M)),tr(D,()=>a(l),M=>k(l,M)),m(t,y),he({get_collaborators:g})}const Ea={id:null,props:{},options:{disableClose:!1,disable_bg_close:!1,max_width:null}},Qt=zt(Ea),Zt=zt(!1);function lc(t){typeof t=="string"?Qt.set({...Ea,id:t}):Qt.set(t),Zt.set(!0)}function Nn(){Qt.set(Ea),Zt.set(!1)}var Vl=S('<div class="modal mousetrap primo-reset svelte-1q11v96"><div class="modal-background svelte-1q11v96"></div> <div class="modal-card svelte-1q11v96"><!></div></div>');function cc(t,e){fe(e,!0);const n=ct(),r=()=>Ke(Qt,"$type",n),s=()=>Ke(Zt,"$visible",n),i={DEPLOY:Ar,USAGE:wo,CREATE_SITE:go,DESIGN:Mo,METADATA:Jo,USER_FORMS:zl,COLLABORATION:Gl};let o=K(q(i[r().id]));async function l(g){k(o,q(i[g]))}async function v(){Za(Zt,!1)}$t(()=>{l(r().id)});var c=ne(),d=G(c);B(d,s,g=>{var f=Vl();const h=le(()=>{var I,L;return((I=r().options)==null?void 0:I.disableClose)||((L=r().options)==null?void 0:L.disable_bg_close)}),y=le(()=>a(o));var _=p(f);_.__click=function(...I){var L;(L=a(h)?()=>{}:v)==null||L.apply(this,I)};var A=b(_,2),x=p(A);Le(x,()=>a(y),(I,L)=>{L(I,on(()=>r().props))}),u(A),u(f),W(()=>{ze(_,"disabled",a(h)),Ue(A,"max-width",r().options.max_width),Ue(A,"height",r().options.height)}),gt(3,f,()=>_t,()=>({duration:100})),m(g,f)}),m(t,c),he()}Ye(["click"]);export{cc as M,un as S,lc as a,Zo as f,Nn as h,oc as s};
