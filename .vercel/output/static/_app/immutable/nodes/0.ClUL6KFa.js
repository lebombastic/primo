const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/processors.BuKVX6UK.js","../chunks/modal.DQW4ZWZ4.js","../chunks/disclose-version.DwtFBC9D.js","../chunks/runtime.B-tQERhy.js","../chunks/store.hrIEzNxT.js","../chunks/index-client.BfaqMVnR.js","../chunks/if.DYHPrnE1.js","../chunks/index.CapXeD3F.js","../chunks/props.Pqwi89p5.js","../chunks/entry.Cv1PstCO.js","../chunks/Icon.CwQkWwrI.js","../chunks/lifecycle.B6hsrwH2.js","../chunks/preload-helper.Cgn74BMC.js","../chunks/stores.Djv4k36v.js","../chunks/snippet.DGJzwTXS.js","../assets/modal.BPnDyo8b.css"])))=>i.map(i=>d[i]);
import{y as L,z as B,A as z,B as I}from"../chunks/modal.DQW4ZWZ4.js";import"../chunks/index.C5ON1TrN.js";import{_ as J}from"../chunks/preload-helper.Cgn74BMC.js";import{a as K,t as R}from"../chunks/disclose-version.DwtFBC9D.js";import{p as H,S as C,J as O,az as W,f as X,a as $,g as v,n as F,s as V,q as E}from"../chunks/runtime.B-tQERhy.js";import{s as G}from"../chunks/snippet.DGJzwTXS.js";import{p as S}from"../chunks/if.DYHPrnE1.js";import{s as Y,f as Z}from"../chunks/store.hrIEzNxT.js";import{a as q}from"../chunks/index-client.BfaqMVnR.js";import{c as Q}from"../chunks/stores.BjTS3-Xp.js";import{M as ee,s as te}from"../chunks/Modal.Bvi9X32r.js";import{c as re}from"../chunks/entry.Cv1PstCO.js";new TextEncoder;const oe=new TextDecoder,ie=e=>{const t=atob(e),r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r},ae=e=>{let t=e;t instanceof Uint8Array&&(t=oe.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return ie(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}},ne=ae;var se=Object.create,P=Object.defineProperty,ce=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,ue=Object.getPrototypeOf,le=Object.prototype.hasOwnProperty,pe=(e,t)=>function(){return t||(0,e[T(e)[0]])((t={exports:{}}).exports,t),t.exports},fe=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of T(t))!le.call(e,a)&&a!==r&&P(e,a,{get:()=>t[a],enumerable:!(o=ce(t,a))||o.enumerable});return e},N=(e,t,r)=>(r=e!=null?se(ue(e)):{},fe(!e||!e.__esModule?P(r,"default",{value:e,enumerable:!0}):r,e)),U=pe({"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js"(e){e.parse=o,e.serialize=a;var t=Object.prototype.toString,r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(i,d){if(typeof i!="string")throw new TypeError("argument str must be a string");for(var h={},n=d||{},y=n.decode||c,f=0;f<i.length;){var s=i.indexOf("=",f);if(s===-1)break;var m=i.indexOf(";",f);if(m===-1)m=i.length;else if(m<s){f=i.lastIndexOf(";",s-1)+1;continue}var _=i.slice(f,s).trim();if(h[_]===void 0){var g=i.slice(s+1,m).trim();g.charCodeAt(0)===34&&(g=g.slice(1,-1)),h[_]=u(g,y)}f=m+1}return h}function a(i,d,h){var n=h||{},y=n.encode||l;if(typeof y!="function")throw new TypeError("option encode is invalid");if(!r.test(i))throw new TypeError("argument name is invalid");var f=y(d);if(f&&!r.test(f))throw new TypeError("argument val is invalid");var s=i+"="+f;if(n.maxAge!=null){var m=n.maxAge-0;if(isNaN(m)||!isFinite(m))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(m)}if(n.domain){if(!r.test(n.domain))throw new TypeError("option domain is invalid");s+="; Domain="+n.domain}if(n.path){if(!r.test(n.path))throw new TypeError("option path is invalid");s+="; Path="+n.path}if(n.expires){var _=n.expires;if(!p(_)||isNaN(_.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+_.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.priority){var g=typeof n.priority=="string"?n.priority.toLowerCase():n.priority;switch(g){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){var D=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(D){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s}function c(i){return i.indexOf("%")!==-1?decodeURIComponent(i):i}function l(i){return encodeURIComponent(i)}function p(i){return t.call(i)==="[object Date]"||i instanceof Date}function u(i,d){try{return d(i)}catch{return i}}}}),b=N(U()),j=N(U());function x(e){if(!e)return null;try{const t=JSON.parse(e);if(!t)return null;if(t.constructor.name==="Object")return t;if(t.constructor.name!=="Array")throw new Error(`Unexpected format: ${t.constructor.name}`);const[r,o,a]=t[0].split("."),c=ne(o),l=new TextDecoder,{exp:p,sub:u,...i}=JSON.parse(l.decode(c));return{expires_at:p,expires_in:p-Math.round(Date.now()/1e3),token_type:"bearer",access_token:t[0],refresh_token:t[1],provider_token:t[2],provider_refresh_token:t[3],user:{id:u,factors:t[4],...i}}}catch(t){return console.warn("Failed to parse cookie string:",t),null}}function de(e){var t;return JSON.stringify([e.access_token,e.refresh_token,e.provider_token,e.provider_refresh_token,((t=e.user)==null?void 0:t.factors)??null])}function k(){return typeof window<"u"&&typeof window.document<"u"}var A={path:"/",sameSite:"lax",maxAge:60*60*24*365*1e3};function he(e){return new RegExp(".{1,"+e+"}","g")}var M=3180,me=he(M);function _e(e,t,r){const o=me;if(Math.ceil(t.length/M)===1)return[{name:e,value:t}];const c=[],l=t.match(o);return l==null||l.forEach((p,u)=>{const i=`${e}.${u}`;c.push({name:i,value:p})}),c}function ge(e,t=()=>null){let r=[];for(let o=0;;o++){const a=`${e}.${o}`,c=t(a);if(!c)break;r.push(c)}return r.length?r.join(""):null}var ve=class{constructor(e){this.cookieOptions={...A,...e,maxAge:A.maxAge}}getItem(e){const t=this.getCookie(e);if(e.endsWith("-code-verifier")&&t)return t;if(t)return JSON.stringify(x(t));const r=ge(e,o=>this.getCookie(o));return r!==null?JSON.stringify(x(r)):null}setItem(e,t){if(e.endsWith("-code-verifier")){this.setCookie(e,t);return}let r=JSON.parse(t);const o=de(r);_e(e,o).forEach(c=>{this.setCookie(c.name,c.value)})}removeItem(e){this._deleteSingleCookie(e),this._deleteChunkedCookies(e)}_deleteSingleCookie(e){this.getCookie(e)&&this.deleteCookie(e)}_deleteChunkedCookies(e,t=0){for(let r=t;;r++){const o=`${e}.${r}`;if(this.getCookie(o)===void 0)break;this.deleteCookie(o)}}},ke=class extends ve{constructor(e){super(e)}getCookie(e){return k()?(0,b.parse)(document.cookie)[e]:null}setCookie(e,t){if(!k())return null;document.cookie=(0,b.serialize)(e,t,{...this.cookieOptions,httpOnly:!1})}deleteCookie(e){if(!k())return null;document.cookie=(0,b.serialize)(e,"",{...this.cookieOptions,maxAge:0,httpOnly:!1})}};function ye(e,t,r){var o;const a=k();return L(e,t,{...r,auth:{flowType:"pkce",autoRefreshToken:a,detectSessionInUrl:a,persistSession:!0,storage:r.auth.storage,...(o=r.auth)!=null&&o.storageKey?{storageKey:r.auth.storageKey}:{}}})}j.parse;j.serialize;/*! Bundled license information:

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/var Se=class extends ke{constructor(e=null,t){super(t),this.serverSession=e}getItem(e){return k()?super.getItem(e):JSON.stringify(this.serverSession)}},w;function be({supabaseUrl:e,supabaseKey:t,event:r,serverSession:o,options:a,cookieOptions:c}){var l;const p=k();if(p&&w)return w;const u=ye(e,t,{...a,global:{fetch:r.fetch,...a==null?void 0:a.global,headers:{...(l=a==null?void 0:a.global)==null?void 0:l.headers,"X-Client-Info":"@supabase/auth-helpers-sveltekit@0.13.0"}},auth:{storage:new Se(o,c)}});return p&&(w=u),u}async function we(e){var o;if(e.url.pathname.startsWith("/auth/github"))return;e.depends("app:data");const t=be({supabaseUrl:B,supabaseKey:z,event:{fetch},serverSession:(o=e==null?void 0:e.data)==null?void 0:o.session}),{data:{session:r}}=await t.auth.getSession();if(r||console.log("no session"),!r&&!e.url.pathname.startsWith("/auth")&&e.url.pathname!=="/payment-succeeded")return{...e.data,session:null,user:{role:"DEV",email:"user@email.com"}};if(r){const[{data:a},{data:c}]=await Promise.all([t.from("sites").select("*").order("created_at",{ascending:!0}),t.from("profiles").select("*").eq("id",r.user.id).single()]);return{supabase:t,session:r,user:{...c,...r.user,collaborator:!1},sites:a}}}const Be=Object.freeze(Object.defineProperty({__proto__:null,load:we},Symbol.toStringTag,{value:"Module"}));var Ce=R("<!> <!>",1);function ze(e,t){H(t,!0),Y();let r=t.data,o=C(S(r.supabase)),a=C(S(r.session));O(()=>{(u=>(E(o,S(u.supabase)),E(a,S(u.session))))(t.data)}),O(()=>{v(a)&&te.auth.setSession({access_token:v(a).access_token,refresh_token:v(a).refresh_token})}),q(()=>{if(!v(o))return;const{data:{subscription:u}}=v(o).auth.onAuthStateChange((i,d)=>{var h;(d==null?void 0:d.expires_at)!==((h=v(a))==null?void 0:h.expires_at)&&re("supabase:auth")});return()=>u.unsubscribe()}),J(async()=>{const{html:u,css:i}=await import("../chunks/processors.BuKVX6UK.js");return{html:u,css:i}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url).then(({html:u,css:i})=>{I({html:u,css:i}),Z(Q,!0)}),W("track",()=>{});var c=Ce(),l=X(c);ee(l,{});var p=V(l,2);G(p,()=>t.children??F),K(e,c),$()}export{ze as component,Be as universal};
